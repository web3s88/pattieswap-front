/*! For license information please see 20.126cc242.chunk.js.LICENSE.txt */
(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[20],{1082:function(t,i,n){"use strict";n.d(i,"a",(function(){return s}));var e=n(21),r=n(18);function s(t,i){Object(r.a)(2,arguments);var n=Object(e.default)(t),s=Object(e.default)(i),o=n.getTime()-s.getTime();return o<0?-1:o>0?1:o}},1109:function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(514);function r(t){return Object(e.a)({},t)}},1600:function(t,i,n){"use strict";n.d(i,"a",(function(){return Y}));var e=n(43),r=n.n(e),s=n(229),o=n.n(s),h=n(47),u=n.n(h),a=n(58),l=n.n(a),c=n(0),f=n.n(c),p=n(55),v=n.n(p),y=n(213),d=n(366),g=n(101),m=n(50);function b(){return(b=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t}).apply(this,arguments)}function w(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],e=!0,r=!1,s=void 0;try{for(var o,h=t[Symbol.iterator]();!(e=(o=h.next()).done)&&(n.push(o.value),!i||n.length!==i);e=!0);}catch(u){r=!0,s=u}finally{try{e||null==h.return||h.return()}finally{if(r)throw s}}return n}(t,i)||function(t,i){if(!t)return;if("string"===typeof t)return M(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,i)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}function _(t,i){if(null==t)return{};var n,e,r=function(t,i){if(null==t)return{};var n,e,r={},s=Object.keys(t);for(e=0;e<s.length;e++)n=s[e],i.indexOf(n)>=0||(r[n]=t[n]);return r}(t,i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(e=0;e<s.length;e++)n=s[e],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x(t){var i=t.offset,n=t.layout,e=t.width,r=t.dataKey,s=t.data,o=t.dataPointFormatter,h=t.xAxis,u=t.yAxis,a=_(t,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),l=Object(m.c)(a),c=s.map((function(t,s){var a=o(t,r),c=a.x,p=a.y,v=a.value,y=a.errorVal;if(!y)return null;var d,m,M=[];if(Array.isArray(y)){var _=w(y,2);d=_[0],m=_[1]}else d=m=y;if("vertical"===n){var x=h.scale,S=p+i,P=S+e,C=S-e,k=x(v-d),A=x(v+m);M.push({x1:A,y1:P,x2:A,y2:C}),M.push({x1:k,y1:S,x2:A,y2:S}),M.push({x1:k,y1:P,x2:k,y2:C})}else if("horizontal"===n){var O=u.scale,T=c+i,E=T-e,B=T+e,I=O(v-d),D=O(v+m);M.push({x1:E,y1:D,x2:B,y2:D}),M.push({x1:T,y1:I,x2:T,y2:D}),M.push({x1:E,y1:I,x2:B,y2:I})}return f.a.createElement(g.a,b({className:"recharts-errorBar",key:"bar-".concat(s)},l),M.map((function(t,i){return f.a.createElement("line",b({},t,{key:"line-".concat(i)}))})))}));return f.a.createElement(g.a,{className:"recharts-errorBars"},c)}x.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},x.displayName="ErrorBar";var S=function(t){return null};S.displayName="Cell";var P=n(599),C=n(17),k=n(85),A=n(170),O=n(48);function T(t){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,i){if(null==t)return{};var n,e,r=function(t,i){if(null==t)return{};var n,e,r={},s=Object.keys(t);for(e=0;e<s.length;e++)n=s[e],i.indexOf(n)>=0||(r[n]=t[n]);return r}(t,i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(e=0;e<s.length;e++)n=s[e],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function B(){return(B=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t}).apply(this,arguments)}function I(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,e)}return n}function D(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?I(Object(n),!0).forEach((function(i){V(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))}))}return t}function V(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function L(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function F(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function z(t,i){return(z=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function N(t){var i=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,e=J(t);if(i){var r=J(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return R(this,n)}}function R(t,i){return!i||"object"!==T(i)&&"function"!==typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t){!function(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&z(t,i)}(h,t);var i,n,e,s=N(h);function h(){var t;L(this,h);for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(t=s.call.apply(s,[this].concat(n))).state={isAnimationFinished:!1},t.id=Object(C.j)("recharts-bar-"),t.handleAnimationEnd=function(){var i=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),i&&i()},t.handleAnimationStart=function(){var i=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),i&&i()},t}return i=h,e=[{key:"getDerivedStateFromProps",value:function(t,i){return t.animationId!==i.prevAnimationId?{prevAnimationId:t.animationId,curData:t.data,prevData:i.curData}:t.data!==i.curData?{curData:t.data}:null}},{key:"renderRectangle",value:function(t,i){return f.a.isValidElement(t)?f.a.cloneElement(t,i):u()(t)?t(i):f.a.createElement(d.a,i)}}],(n=[{key:"renderRectanglesStatically",value:function(t){var i=this,n=this.props.shape,e=Object(m.c)(this.props);return t&&t.map((function(t,r){var s=D(D(D({},e),t),{},{index:r});return f.a.createElement(g.a,B({className:"recharts-bar-rectangle"},Object(m.b)(i.props,t,r),{key:"rectangle-".concat(r)}),h.renderRectangle(n,s))}))}},{key:"renderRectanglesWithAnimation",value:function(){var t=this,i=this.props,n=i.data,e=i.layout,r=i.isAnimationActive,s=i.animationBegin,o=i.animationDuration,h=i.animationEasing,u=i.animationId,a=this.state.prevData;return f.a.createElement(y.a,{begin:s,duration:o,isActive:r,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(i){var r=i.t,s=n.map((function(t,i){var n=a&&a[i];if(n){var s=Object(C.e)(n.x,t.x),o=Object(C.e)(n.y,t.y),h=Object(C.e)(n.width,t.width),u=Object(C.e)(n.height,t.height);return D(D({},t),{},{x:s(r),y:o(r),width:h(r),height:u(r)})}if("horizontal"===e){var l=Object(C.e)(0,t.height)(r);return D(D({},t),{},{y:t.y+t.height-l,height:l})}var c=Object(C.e)(0,t.width)(r);return D(D({},t),{},{width:c})}));return f.a.createElement(g.a,null,t.renderRectanglesStatically(s))}))}},{key:"renderRectangles",value:function(){var t=this.props,i=t.data,n=t.isAnimationActive,e=this.state.prevData;return!(n&&i&&i.length)||e&&o()(e,i)?this.renderRectanglesStatically(i):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var t=this,i=this.props.data,n=Object(m.c)(this.props.background);return i.map((function(i,e){i.value;var r=i.background,s=E(i,["value","background"]);if(!r)return null;var o=D(D(D(D(D({},s),{},{fill:"#eee"},r),n),Object(m.b)(t.props,i,e)),{},{index:e,key:"background-bar-".concat(e),className:"recharts-bar-background-rectangle"});return h.renderRectangle(t.props.background,o)}))}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,i=t.data,n=t.xAxis,e=t.yAxis,r=t.layout,s=t.children,o=Object(k.a)(s,x.displayName);if(!o)return null;var h="vertical"===r?i[0].height/2:i[0].width/2;function u(t,i){return{x:t.x,y:t.y,value:t.value,errorVal:Object(O.v)(t,i)}}return o.map((function(t,s){return f.a.cloneElement(t,{key:"error-bar-".concat(s),data:i,xAxis:n,yAxis:e,layout:r,offset:h,dataPointFormatter:u})}))}},{key:"render",value:function(){var t=this.props,i=t.hide,n=t.data,e=t.className,s=t.xAxis,o=t.yAxis,h=t.left,u=t.top,a=t.width,l=t.height,c=t.isAnimationActive,p=t.background,y=t.id;if(i||!n||!n.length)return null;var d=this.state.isAnimationFinished,m=v()("recharts-bar",e),b=s&&s.allowDataOverflow||o&&o.allowDataOverflow,w=r()(y)?this.id:y;return f.a.createElement(g.a,{className:m},b?f.a.createElement("defs",null,f.a.createElement("clipPath",{id:"clipPath-".concat(w)},f.a.createElement("rect",{x:h,y:u,width:a,height:l}))):null,f.a.createElement(g.a,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(),(!c||d)&&P.a.renderCallByParent(this.props,n))}}])&&F(i.prototype,n),e&&F(i,e),h}(c.PureComponent);Y.displayName="Bar",Y.defaultProps={xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!A.a.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"},Y.getComposedData=function(t){var i=t.props,n=t.item,e=t.barPosition,r=t.bandSize,s=t.xAxis,o=t.yAxis,h=t.xAxisTicks,u=t.yAxisTicks,a=t.stackedData,c=t.dataStartIndex,f=t.displayedData,p=t.offset,v=Object(O.e)(e,n);if(!v)return null;var y=i.layout,d=n.props,g=d.dataKey,m=d.children,b=d.minPointSize,w="horizontal"===y?o:s,M=a?w.scale.domain():null,_=Object(O.i)({numericAxis:w}),x=Object(k.a)(m,S.displayName),P=f.map((function(t,i){var n,e,f,p,d,m;if(a?n=Object(O.B)(a[c+i],M):(n=Object(O.v)(t,g),l()(n)||(n=[_,n])),"horizontal"===y){if(e=Object(O.j)({axis:s,ticks:h,bandSize:r,offset:v.offset,entry:t,index:i}),f=o.scale(n[1]),p=v.size,d=o.scale(n[0])-o.scale(n[1]),m={x:e,y:o.y,width:p,height:o.height},Math.abs(b)>0&&Math.abs(d)<Math.abs(b)){var w=Object(C.i)(d||b)*(Math.abs(b)-Math.abs(d));f-=w,d+=w}}else e=s.scale(n[0]),f=Object(O.j)({axis:o,ticks:u,bandSize:r,offset:v.offset,entry:t,index:i}),p=s.scale(n[1])-s.scale(n[0]),d=v.size,m={x:s.x,y:f,width:s.width,height:d},Math.abs(b)>0&&Math.abs(p)<Math.abs(b)&&(p+=Object(C.i)(p||b)*(Math.abs(b)-Math.abs(p)));return D(D({},t),{},{x:e,y:f,width:p,height:d,value:a?n:n[1],payload:t,background:m},x&&x[i]&&x[i].props)}));return D({data:P,layout:y},p)}},1603:function(t,i,n){"use strict";n.d(i,"a",(function(){return ie}));var e={allowDownsampling:!0};var r,s,o,h=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function u(t,i){var n,e=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(e)}function a(t,i,n,e){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(n,i+r),t.lineTo(e,i+r),t.stroke()}(o=r||(r={}))[o.Simple=0]="Simple",o[o.WithSteps=1]="WithSteps",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(s||(s={}));var l=function(t,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)};function c(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}l(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var r in i=arguments[n])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)};function p(t,i){for(var n=0,e=i.length,r=t.length;n<e;n++,r++)t[r]=i[n];return t}function v(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function y(t){if(void 0===t)throw new Error("Value is undefined");return t}function d(t){if(null===t)throw new Error("Value is null");return t}function g(t){return d(y(t))}function m(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=0,r=i;e<r.length;e++){var s=r[e];for(var o in s)void 0!==s[o]&&("object"!=typeof s[o]||void 0===t[o]?t[o]=s[o]:m(t[o],s[o]))}return t}function b(t){return"number"==typeof t&&isFinite(t)}function w(t){return"number"==typeof t&&t%1==0}function M(t){return"string"==typeof t}function _(t){return"boolean"==typeof t}function x(t){var i,n,e,r=t;if(!r||"object"!=typeof r)return r;for(n in i=Array.isArray(r)?[]:{},r)r.hasOwnProperty(n)&&(e=r[n],i[n]=e&&"object"==typeof e?x(e):e);return i}function S(t){return null!==t}function P(t){return null===t?void 0:t}var C=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,e){this.t.forEach((function(r){t.save(),r.h(t,i,n,e),t.restore()}))},t}(),k=function(){function t(){}return t.prototype.h=function(t,i,n,e){t.save(),t.scale(i,i),this.u(t,n,e),t.restore()},t.prototype.o=function(t,i,n,e){t.save(),t.scale(i,i),this.l(t,n,e),t.restore()},t.prototype.l=function(t,i,n){},t}(),A=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,e=function(e){t.beginPath();for(var r=i.to-1;r>=i.from;--r){var s=n.m[r];t.moveTo(s.g,s.p),t.arc(s.g,s.p,e,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,e(n.N+2),t.fillStyle=n.S,e(n.N)}},i}(k),O={from:0,to:1},T=function(){function t(t,i){this.C=new C,this.D=[],this.T=[],this.B=!0,this.L=t,this.A=i,this.C.i(this.D)}return t.prototype.V=function(t){var i=this,n=this.L.O();n.length!==this.D.length&&(this.T=n.map((function(){return{m:[{g:0,p:0,P:0,F:0}],S:"",k:i.L.I().layout.backgroundColor,N:0,M:null}})),this.D=this.T.map((function(t){var i=new A;return i._(t),i})),this.C.i(this.D)),this.B=!0},t.prototype.W=function(t,i,n){return this.B&&(this.R(),this.B=!1),this.C},t.prototype.R=function(){var t=this,i=this.L.O(),n=this.A.j(),e=this.L.U();i.forEach((function(i,r){var s=t.T[r],o=i.q(n);if(null!==o&&i.H()){var h=d(i.Y());s.S=o.K,s.k=o.$,s.N=o.N,s.m[0].F=o.F,s.m[0].p=i.Z().X(o.F,h.J),s.m[0].P=n,s.m[0].g=e.G(n),s.M=O}else s.M=null}))},t}(),E=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,n,e){if(null!==this.tt){var r=this.tt.it.H,s=this.tt.nt.H;if(r||s){t.save();var o=Math.round(this.tt.g*i),h=Math.round(this.tt.p*i),l=Math.ceil(this.tt.ht*i),c=Math.ceil(this.tt.st*i);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,u(t,this.tt.it.ut),function(t,i,n,e){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(i+r,0),t.lineTo(i+r,e),t.stroke()}(t,o,0,c)),s&&h>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,u(t,this.tt.nt.ut),a(t,h,0,l)),t.restore()}}},t}(),B=function(){function t(t){this.B=!0,this.at={it:{rt:1,ut:0,et:"",H:!1},nt:{rt:1,ut:0,et:"",H:!1},ht:0,st:0,g:0,p:0},this.ot=new E(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.R(),this.B=!1),this.ot},t.prototype.R=function(){var t=this.lt.H(),i=d(this.lt.ft()),n=i.ct().I().crosshair,e=this.at;e.nt.H=t&&this.lt.vt(i),e.it.H=t&&this.lt._t(),e.nt.rt=n.horzLine.width,e.nt.ut=n.horzLine.style,e.nt.et=n.horzLine.color,e.it.rt=n.vertLine.width,e.it.ut=n.vertLine.style,e.it.et=n.vertLine.color,e.ht=i.dt(),e.st=i.wt(),e.g=this.lt.Mt(),e.p=this.lt.bt()},t}(),I={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function D(t){return t<0?0:t>255?255:Math.round(t)||0}var V=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,L=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,F=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,z=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function N(t){var i,n=function(t){var i;if((t=t.toLowerCase())in I&&(t=I[t]),i=z.exec(t)||F.exec(t))return[D(parseInt(i[1],10)),D(parseInt(i[2],10)),D(parseInt(i[3],10))];if(i=L.exec(t))return[D(parseInt(i[1],16)),D(parseInt(i[2],16)),D(parseInt(i[3],16))];if(i=V.exec(t))return[D(17*parseInt(i[1],16)),D(17*parseInt(i[2],16)),D(17*parseInt(i[3],16))];throw new Error("Cannot parse color: "+t)}(t);return{gt:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",yt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function R(t,i,n,e,r,s){t.fillRect(i+s,n,e-2*s,s),t.fillRect(i+s,n+r-s,e-2*s,s),t.fillRect(i,n,s,r),t.fillRect(i+e-s,n,s,r)}function J(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function Y(t,i,n,e,r,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(i,n,e,r),t.restore()}var j,U=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.kt=i},t.prototype.h=function(t,i,n,e,r,s){if(this.tt.H){t.font=i.xt;var o=this.tt.Nt||!this.tt.St?i.Ct:0,h=i.Dt,u=i.Tt,a=i.Bt,l=i.Et,c=i.Lt,f=this.tt.At,p=Math.ceil(n.Vt(t,f)),v=i.Ot,y=i.zt+u+a,d=Math.ceil(.5*y),g=h+p+l+c+o,m=this.kt.Pt;this.kt.Ft&&(m=this.kt.Ft);var b,w,M=(m=Math.round(m))-d,_=M+y,x="right"===r,S=x?e:0,P=Math.ceil(e*s),C=S;if(t.fillStyle=this.kt.gt,t.lineWidth=1,t.lineCap="butt",f){x?(b=S-o,w=(C=S-g)+c):(C=S+g,b=S+o,w=S+h+o+l);var k=Math.max(1,Math.floor(s)),A=Math.max(1,Math.floor(h*s)),O=x?P:0,T=Math.round(M*s),E=Math.round(C*s),B=Math.round(m*s)-Math.floor(.5*s),I=B+k+(B-T),D=Math.round(b*s);t.save(),t.beginPath(),t.moveTo(O,T),t.lineTo(E,T),t.lineTo(E,I),t.lineTo(O,I),t.fill(),t.fillStyle=this.tt.$,t.fillRect(x?P-A:0,T,A,I-T),this.tt.Nt&&(t.fillStyle=this.kt.et,t.fillRect(O,B,D-O,k)),t.textAlign="left",t.fillStyle=this.kt.et,J(t,s,(function(){t.fillText(f,w,_-a-v)})),t.restore()}}},t.prototype.wt=function(t,i){return this.tt.H?t.zt+t.Tt+t.Bt:0},t}(),H=function(){function t(t){this.It={Pt:0,et:"#FFF",gt:"#000"},this.Wt={At:"",H:!1,Nt:!0,St:!1,$:""},this.Rt={At:"",H:!1,Nt:!1,St:!0,$:""},this.B=!0,this.jt=new(t||U)(this.Wt,this.It),this.Ut=new(t||U)(this.Rt,this.It)}return t.prototype.At=function(){return this.Wt.At},t.prototype.Pt=function(){return this.qt(),this.It.Pt},t.prototype.V=function(){this.B=!0},t.prototype.wt=function(t,i){return void 0===i&&(i=!1),Math.max(this.jt.wt(t,i),this.Ut.wt(t,i))},t.prototype.Ht=function(){return this.It.Ft||0},t.prototype.Yt=function(t){this.It.Ft=t},t.prototype.Kt=function(){return this.qt(),this.Wt.H||this.Rt.H},t.prototype.$t=function(){return this.qt(),this.Wt.H},t.prototype.W=function(t){return this.qt(),this.Wt.Nt=this.Wt.Nt&&t.I().drawTicks,this.Rt.Nt=this.Rt.Nt&&t.I().drawTicks,this.jt._(this.Wt,this.It),this.Ut._(this.Rt,this.It),this.jt},t.prototype.Xt=function(){return this.qt(),this.jt._(this.Wt,this.It),this.Ut._(this.Rt,this.It),this.Ut},t.prototype.qt=function(){this.B&&(this.Wt.Nt=!0,this.Rt.Nt=!1,this.Zt(this.Wt,this.Rt,this.It))},t}(),W=function(t){function i(i,n,e){var r=t.call(this)||this;return r.lt=i,r.Jt=n,r.Gt=e,r}return c(i,t),i.prototype.Zt=function(t,i,n){t.H=!1;var e=this.lt.I().horzLine;if(e.labelVisible){var r=this.Jt.Y();if(this.lt.H()&&!this.Jt.Qt()&&null!==r){var s=N(e.labelBackgroundColor);n.gt=s.gt,n.et=s.yt;var o=this.Gt(this.Jt);n.Pt=o.Pt,t.At=this.Jt.ti(o.F,r),t.H=!0}}},i}(H),Q=/[1-9]/g,q=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var e=this;if(null!==this.tt&&!1!==this.tt.H&&0!==this.tt.At.length){t.font=i.xt;var r=Math.round(i.ii.Vt(t,this.tt.At,Q));if(!(r<=0)){t.save();var s=i.ni,o=r+2*s,h=o/2,u=this.tt.dt,a=this.tt.Pt,l=Math.floor(a-h)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-h)+.5):l+o>u&&(a-=Math.abs(u-(l+o)),l=Math.floor(a-h)+.5);var c=l+o,f=0+i.Dt+i.Tt+i.zt+i.Bt;t.fillStyle=this.tt.gt;var p=Math.round(l*n),v=Math.round(0*n),y=Math.round(c*n),g=Math.round(f*n);t.fillRect(p,v,y-p,g-v);var m=Math.round(this.tt.Pt*n),b=v,w=Math.round((b+i.Dt+i.Ct)*n);t.fillStyle=this.tt.et;var M=Math.max(1,Math.floor(n)),_=Math.floor(.5*n);t.fillRect(m-_,b,M,w-b);var x=f-i.Ot-i.Bt;t.textAlign="left",t.fillStyle=this.tt.et,J(t,n,(function(){t.fillText(d(e.tt).At,l+s,x)})),t.restore()}}},t}(),Z=function(){function t(t,i,n){this.B=!0,this.ot=new q,this.at={H:!1,gt:"#4c525e",et:"white",At:"",dt:0,Pt:NaN},this.A=t,this.hi=i,this.Gt=n}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(){return this.B&&(this.R(),this.B=!1),this.ot._(this.at),this.ot},t.prototype.R=function(){var t=this.at;t.H=!1;var i=this.A.I().vertLine;if(i.labelVisible){var n=this.hi.U();if(!n.Qt()){var e=n.si(this.A.j());t.dt=n.dt();var r=this.Gt();if(r.P){t.Pt=r.Pt,t.At=n.ri(d(e)),t.H=!0;var s=N(i.labelBackgroundColor);t.gt=s.gt,t.et=s.yt}}}},t}(),$=function(){function t(){this.ei=null,this.ui=0}return t.prototype.ai=function(){return this.ui},t.prototype.oi=function(t){this.ui=t},t.prototype.Z=function(){return this.ei},t.prototype.li=function(t){this.ei=t},t.prototype.fi=function(t,i){return[]},t.prototype.ci=function(t){return[]},t.prototype.vi=function(){return[]},t.prototype.H=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(j||(j={}));var X=function(t){function i(i,n){var e,r,s=t.call(this)||this;s._i=null,s.di=NaN,s.wi=0,s.Mi=!0,s.bi=new Map,s.mi=!1,s.gi=NaN,s.pi=NaN,s.yi=NaN,s.ki=NaN,s.hi=i,s.xi=n,s.Ni=new T(i,s),s.Si=(e=function(){return s.di},r=function(){return s.pi},function(t){var i=r(),n=e();if(t===d(s._i).Ci())return{F:n,Pt:i};var o=d(t.Y());return{F:t.Di(i,o),Pt:i}});var o=function(){return{P:s.hi.U().si(s.wi),Pt:s.Mt()}};return s.Ti=new Z(s,i,o),s.Bi=new B(s),s}return c(i,t),i.prototype.I=function(){return this.xi},i.prototype.Ei=function(t,i){this.yi=t,this.ki=i},i.prototype.Li=function(){this.yi=NaN,this.ki=NaN},i.prototype.Ai=function(){return this.yi},i.prototype.Vi=function(){return this.ki},i.prototype.Oi=function(t,i,n){this.mi||(this.mi=!0),this.Mi=!0,this.zi(t,i,n)},i.prototype.j=function(){return this.wi},i.prototype.Mt=function(){return this.gi},i.prototype.bt=function(){return this.pi},i.prototype.H=function(){return this.Mi},i.prototype.Pi=function(){this.Mi=!1,this.Fi(),this.di=NaN,this.gi=NaN,this.pi=NaN,this._i=null,this.Li()},i.prototype.ci=function(t){return null!==this._i?[this.Bi,this.Ni]:[]},i.prototype.vt=function(t){return t===this._i&&this.xi.horzLine.visible},i.prototype._t=function(){return this.xi.vertLine.visible},i.prototype.fi=function(t,i){this.Mi&&this._i===t||this.bi.clear();var n=[];return this._i===t&&n.push(this.Ii(this.bi,i,this.Si)),n},i.prototype.vi=function(){return this.Mi?[this.Ti]:[]},i.prototype.ft=function(){return this._i},i.prototype.Wi=function(){this.Bi.V(),this.bi.forEach((function(t){return t.V()})),this.Ti.V(),this.Ni.V()},i.prototype.Ri=function(t){return t&&!t.Ci().Qt()?t.Ci():null},i.prototype.zi=function(t,i,n){this.ji(t,i,n)&&this.Wi()},i.prototype.ji=function(t,i,n){var e=this.gi,r=this.pi,s=this.di,o=this.wi,h=this._i,u=this.Ri(n);this.wi=t,this.gi=isNaN(t)?NaN:this.hi.U().G(t),this._i=n;var a=null!==u?u.Y():null;return null!==u&&null!==a?(this.di=i,this.pi=u.X(i,a)):(this.di=NaN,this.pi=NaN),e!==this.gi||r!==this.pi||o!==this.wi||s!==this.di||h!==this._i},i.prototype.Fi=function(){var t=this.hi.O().map((function(t){return t.qi().Ui()})).filter(S),i=0===t.length?null:Math.max.apply(Math,t);this.wi=null!==i?i:NaN},i.prototype.Ii=function(t,i,n){var e=t.get(i);return void 0===e&&(e=new W(this,i,n),t.set(i,e)),e},i}($);function G(t,i){if(!b(t))return"n/a";if(!w(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var K=function(){function t(t,i){if(i||(i=1),b(t)&&w(t)||(t=100),t<0)throw new TypeError("invalid base");this.Jt=t,this.Hi=i,this.Yi()}return t.prototype.format=function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.Ki(t)},t.prototype.Yi=function(){if(this.$i=0,this.Jt>0&&this.Hi>0)for(var t=this.Jt;t>1;)t/=10,this.$i++},t.prototype.Ki=function(t){var i=this.Jt/this.Hi,n=Math.floor(t),e="",r=void 0!==this.$i?this.$i:NaN;if(i>1){var s=+(Math.round(t*i)-n*i).toFixed(this.$i);s>=i&&(s-=i,n+=1),e="."+G(+s.toFixed(this.$i)*this.Hi,r)}else n=Math.round(n*i)/i,r>0&&(e="."+G(0,r));return n.toFixed(0)+e},t}(),tt=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return c(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(K),it=function(){function t(){this.Xi=[]}return t.prototype.Zi=function(t,i,n){var e={Ji:t,Gi:i,Qi:!0===n};this.Xi.push(e)},t.prototype.tn=function(t){var i=this.Xi.findIndex((function(i){return t===i.Ji}));i>-1&&this.Xi.splice(i,1)},t.prototype.nn=function(t){this.Xi=this.Xi.filter((function(i){return i.Gi===t}))},t.prototype.hn=function(t,i){var n=p([],this.Xi);this.Xi=this.Xi.filter((function(t){return!t.Qi})),n.forEach((function(n){return n.Ji(t,i)}))},t.prototype.sn=function(){return this.Xi.length>0},t.prototype.rn=function(){this.Xi=[]},t}(),nt=function(){function t(t,i){this.en=t,this.un=i}return t.prototype.an=function(t){return null!==t&&this.en===t.en&&this.un===t.un},t.prototype.on=function(){return new t(this.en,this.un)},t.prototype.ln=function(){return this.en},t.prototype.fn=function(){return this.un},t.prototype.cn=function(){return this.un-this.en},t.prototype.Qt=function(){return this.un===this.en||Number.isNaN(this.un)||Number.isNaN(this.en)},t.prototype.vn=function(i){return null===i?this:new t(Math.min(this.ln(),i.ln()),Math.max(this.fn(),i.fn()))},t.prototype._n=function(t){if(b(t)&&0!==this.un-this.en){var i=.5*(this.un+this.en),n=this.un-i,e=this.en-i;n*=t,e*=t,this.un=i+n,this.en=i+e}},t.prototype.dn=function(t){b(t)&&(this.un+=t,this.en+=t)},t.prototype.wn=function(){return{minValue:this.en,maxValue:this.un}},t.Mn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function et(t,i,n){return Math.min(Math.max(t,i),n)}function rt(t,i,n){return i-t<=n}function st(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function ot(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ht(t){var i=Math.ceil(t);return i%2==0?i-1:i}function ut(t,i){var n=100*(t-i)/i;return i<0?-n:n}function at(t,i){var n=ut(t.ln(),i),e=ut(t.fn(),i);return new nt(n,e)}function lt(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function ct(t,i){var n=lt(t.ln(),i),e=lt(t.fn(),i);return new nt(n,e)}function ft(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=st(i+1e-4)+4;return t<0?-n:n}function pt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function vt(t){if(null===t)return null;var i=ft(t.ln()),n=ft(t.fn());return new nt(i,n)}var yt,dt=function(){function t(t,i){if(this.bn=t,this.mn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.bn))this.gn=[2,2.5,2];else{this.gn=[];for(var n=this.bn;1!==n;){if(n%2==0)this.gn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.gn.push(2,2.5),n/=5}if(this.gn.length>100)throw new Error("something wrong with base")}}}return t.prototype.pn=function(t,i,n){for(var e,r=0===this.bn?0:1/this.bn,s=1e-9,o=Math.pow(10,Math.max(0,Math.ceil(st(t-i)))),h=0,u=this.mn[0];;){var a=rt(o,r,s)&&o>r+s,l=rt(o,n*u,s),c=rt(o,1,s);if(!(a&&l&&c))break;o/=u,u=this.mn[++h%this.mn.length]}if(o<=r+s&&(o=r),o=Math.max(1,o),this.gn.length>0&&(e=o,1,s,Math.abs(e-1)<1e-9))for(h=0,u=this.gn[0];rt(o,n*u,s)&&o>r+s;)o/=u,u=this.gn[++h%this.gn.length];return o},t}(),gt=function(){function t(t,i,n,e){this.yn=[],this.Jt=t,this.bn=i,this.kn=n,this.xn=e}return t.prototype.pn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Jt.wt(),e=(t-i)*this.Nn()/n,r=new dt(this.bn,[2,2.5,2]),s=new dt(this.bn,[2,2,2.5]),o=new dt(this.bn,[2.5,2,2]),h=[];return h.push(r.pn(t,i,e),s.pn(t,i,e),o.pn(t,i,e)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(h)},t.prototype.Sn=function(){var t=this.Jt,i=t.Y();if(null!==i){var n=t.wt(),e=this.kn(n-1,i),r=this.kn(0,i),s=this.Jt.I().entireTextOnly?this.Cn()/2:0,o=s,h=n-1-s,u=Math.max(e,r),a=Math.min(e,r);if(u!==a){for(var l=this.pn(u,a),c=u%l,f=u>=a?1:-1,p=null,v=0,y=u-(c+=c<0?l:0);y>a;y-=l){var d=this.xn(y,i,!0);null!==p&&Math.abs(d-p)<this.Nn()||d<o||d>h||(v<this.yn.length?(this.yn[v].Dn=d,this.yn[v].Tn=t.Bn(y)):this.yn.push({Dn:d,Tn:t.Bn(y)}),v++,p=d,t.En()&&(l=this.pn(y*f,a)))}this.yn.length=v}else this.yn=[]}else this.yn=[]},t.prototype.Ln=function(){return this.yn},t.prototype.Cn=function(){return this.Jt.zt()},t.prototype.Nn=function(){return Math.ceil(2.5*this.Cn())},t}();function mt(t){return t.slice().sort((function(t,i){return d(t.ai())-d(i.ai())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(yt||(yt={}));var bt,wt=new tt,Mt=new K(100,1),_t=function(){function t(t,i,n,e){this.An=0,this.Vn=null,this.On=null,this.zn=null,this.Pn={Fn:!1,In:null},this.Wn=0,this.Rn=0,this.jn=new it,this.Un=new it,this.qn=[],this.Hn=null,this.Yn=null,this.Kn=null,this.$n=null,this.Xn=Mt,this.Zn=t,this.xi=i,this.Jn=n,this.Gn=e,this.Qn=new gt(this,100,this.th.bind(this),this.ih.bind(this))}return t.prototype.nh=function(){return this.Zn},t.prototype.I=function(){return this.xi},t.prototype.hh=function(t){if(m(this.xi,t),this.sh(),void 0!==t.mode&&this.rh({eh:t.mode}),void 0!==t.scaleMargins){var i=y(t.scaleMargins.top),n=y(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.uh(),this.Yn=null}},t.prototype.ah=function(){return this.xi.autoScale},t.prototype.En=function(){return 1===this.xi.mode},t.prototype.oh=function(){return 2===this.xi.mode},t.prototype.lh=function(){return 3===this.xi.mode},t.prototype.eh=function(){return{fh:this.xi.autoScale,_h:this.xi.invertScale,eh:this.xi.mode}},t.prototype.rh=function(t){var i=this.eh(),n=null;void 0!==t.fh&&(this.xi.autoScale=t.fh),void 0!==t.eh&&(this.xi.mode=t.eh,2!==t.eh&&3!==t.eh||(this.xi.autoScale=!0),this.Pn.Fn=!1),1===i.eh&&t.eh!==i.eh&&(function(t){if(null===t)return!1;var i=pt(t.ln()),n=pt(t.fn());return isFinite(i)&&isFinite(n)}(this.On)?null!==(n=function(t){if(null===t)return null;var i=pt(t.ln()),n=pt(t.fn());return new nt(i,n)}(this.On))&&this.dh(n):this.xi.autoScale=!0),1===t.eh&&t.eh!==i.eh&&null!==(n=vt(this.On))&&this.dh(n);var e=i.eh!==this.xi.mode;e&&(2===i.eh||this.oh())&&this.sh(),e&&(3===i.eh||this.lh())&&this.sh(),void 0!==t._h&&i._h!==t._h&&(this.xi.invertScale=t._h,this.wh()),this.Un.hn(i,this.eh())},t.prototype.Mh=function(){return this.Un},t.prototype.zt=function(){return this.Jn.fontSize},t.prototype.wt=function(){return this.An},t.prototype.bh=function(t){this.An!==t&&(this.An=t,this.uh(),this.Yn=null)},t.prototype.mh=function(){if(this.Vn)return this.Vn;var t=this.wt()-this.gh()-this.ph();return this.Vn=t,t},t.prototype.yh=function(){return this.kh(),this.On},t.prototype.dh=function(t,i){var n=this.On;(i||null===n&&null!==t||null!==n&&!n.an(t))&&(this.Yn=null,this.On=t)},t.prototype.Qt=function(){return this.kh(),0===this.An||!this.On||this.On.Qt()},t.prototype.xh=function(t){return this._h()?t:this.wt()-1-t},t.prototype.X=function(t,i){return this.oh()?t=ut(t,i):this.lh()&&(t=lt(t,i)),this.ih(t,i)},t.prototype.Nh=function(t,i,n){this.kh();for(var e=this.ph(),r=d(this.yh()),s=r.ln(),o=r.fn(),h=this.mh()-1,u=this._h(),a=h/(o-s),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.Sh(),p=l;p<c;p++){var v=t[p],y=v.F;if(!isNaN(y)){var g=y;null!==f&&(g=f(v.F,i));var m=e+a*(g-s),b=u?m:this.An-1-m;v.p=b}}},t.prototype.Ch=function(t,i,n){this.kh();for(var e=this.ph(),r=d(this.yh()),s=r.ln(),o=r.fn(),h=this.mh()-1,u=this._h(),a=h/(o-s),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.Sh(),p=l;p<c;p++){var v=t[p],y=v.open,g=v.high,m=v.low,b=v.close;null!==f&&(y=f(v.open,i),g=f(v.high,i),m=f(v.low,i),b=f(v.close,i));var w=e+a*(y-s),M=u?w:this.An-1-w;v.Dh=M,w=e+a*(g-s),M=u?w:this.An-1-w,v.Th=M,w=e+a*(m-s),M=u?w:this.An-1-w,v.Bh=M,w=e+a*(b-s),M=u?w:this.An-1-w,v.Eh=M}},t.prototype.Di=function(t,i){var n=this.th(t,i);return this.Lh(n,i)},t.prototype.Lh=function(t,i){var n=t;return this.oh()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.lh()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Ah=function(){return this.qn},t.prototype.Vh=function(){if(this.Hn)return this.Hn;for(var t=[],i=0;i<this.qn.length;i++){var n=this.qn[i];null===n.ai()&&n.oi(i+1),t.push(n)}return t=mt(t),this.Hn=t,this.Hn},t.prototype.Oh=function(t){-1===this.qn.indexOf(t)&&(this.qn.push(t),this.sh(),this.zh())},t.prototype.Ph=function(t){var i=this.qn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.qn.splice(i,1),0===this.qn.length&&(this.rh({fh:!0}),this.dh(null)),this.sh(),this.zh()},t.prototype.Y=function(){for(var t=null,i=0,n=this.qn;i<n.length;i++){var e=n[i].Y();null!==e&&(null===t||e.Fh<t.Fh)&&(t=e)}return null===t?null:t.J},t.prototype._h=function(){return this.xi.invertScale},t.prototype.Ln=function(){return this.Yn||(this.Qn.Sn(),this.Yn=this.Qn.Ln(),this.jn.hn()),this.Yn},t.prototype.Ih=function(){return this.jn},t.prototype.Wh=function(t){this.oh()||this.lh()||null===this.Kn&&null===this.zn&&(this.Qt()||(this.Kn=this.An-t,this.zn=d(this.yh()).on()))},t.prototype.Rh=function(t){if(!this.oh()&&!this.lh()&&null!==this.Kn){this.rh({fh:!1}),(t=this.An-t)<0&&(t=0);var i=(this.Kn+.2*(this.An-1))/(t+.2*(this.An-1)),n=d(this.zn).on();i=Math.max(i,.1),n._n(i),this.dh(n)}},t.prototype.jh=function(){this.oh()||this.lh()||(this.Kn=null,this.zn=null)},t.prototype.Uh=function(t){this.ah()||null===this.$n&&null===this.zn&&(this.Qt()||(this.$n=t,this.zn=d(this.yh()).on()))},t.prototype.qh=function(t){if(!this.ah()&&null!==this.$n){var i=d(this.yh()).cn()/(this.mh()-1),n=t-this.$n;this._h()&&(n*=-1);var e=n*i,r=d(this.zn).on();r.dn(e),this.dh(r,!0),this.Yn=null}},t.prototype.Hh=function(){this.ah()||null!==this.$n&&(this.$n=null,this.zn=null)},t.prototype.Yh=function(){return this.Xn||this.sh(),this.Xn},t.prototype.ti=function(t,i){switch(this.xi.mode){case 2:return this.Yh().format(ut(t,i));case 3:return this.Yh().format(lt(t,i));default:return this.Kh(t)}},t.prototype.Bn=function(t){switch(this.xi.mode){case 2:case 3:return this.Yh().format(t);default:return this.Kh(t)}},t.prototype.$h=function(t){return this.Kh(t,d(this.Xh()).Yh())},t.prototype.Zh=function(t,i){return t=ut(t,i),wt.format(t)},t.prototype.Jh=function(){return this.qn},t.prototype.Gh=function(t){this.Pn={In:t,Fn:!1}},t.prototype.Wi=function(){this.qn.forEach((function(t){return t.Wi()}))},t.prototype.sh=function(){this.Yn=null;var t=this.Xh(),i=100;null!==t&&(i=Math.round(1/t.Qh())),this.Xn=Mt,this.oh()?(this.Xn=wt,i=100):this.lh()?(this.Xn=new K(100,1),i=100):null!==t&&(this.Xn=t.Yh()),this.Qn=new gt(this,i,this.th.bind(this),this.ih.bind(this)),this.Qn.Sn()},t.prototype.zh=function(){this.Hn=null},t.prototype.Xh=function(){return this.qn[0]||null},t.prototype.gh=function(){return this._h()?this.xi.scaleMargins.bottom*this.wt()+this.Rn:this.xi.scaleMargins.top*this.wt()+this.Wn},t.prototype.ph=function(){return this._h()?this.xi.scaleMargins.top*this.wt()+this.Wn:this.xi.scaleMargins.bottom*this.wt()+this.Rn},t.prototype.kh=function(){this.Pn.Fn||(this.Pn.Fn=!0,this.ts())},t.prototype.uh=function(){this.Vn=null},t.prototype.ih=function(t,i){if(this.kh(),this.Qt())return 0;t=this.En()&&t?ft(t):t;var n=d(this.yh()),e=this.ph()+(this.mh()-1)*(t-n.ln())/n.cn();return this.xh(e)},t.prototype.th=function(t,i){if(this.kh(),this.Qt())return 0;var n=this.xh(t),e=d(this.yh()),r=e.ln()+e.cn()*((n-this.ph())/(this.mh()-1));return this.En()?pt(r):r},t.prototype.wh=function(){this.Yn=null,this.Qn.Sn()},t.prototype.ts=function(){var t=this.Pn.In;if(null!==t){for(var i=null,n=0,e=0,r=0,s=this.Jh();r<s.length;r++){var o=s[r];if(o.H()){var h=o.Y();if(null!==h){var u=o.ns(t.hs(),t.ss()),a=u&&u.yh();if(null!==a){switch(this.xi.mode){case 1:a=vt(a);break;case 2:a=at(a,h.J);break;case 3:a=ct(a,h.J)}if(i=null===i?a:i.vn(d(a)),null!==u){var l=u.rs();null!==l&&(n=Math.max(n,l.above),e=Math.max(n,l.below))}}}}}if(n===this.Wn&&e===this.Rn||(this.Wn=n,this.Rn=e,this.Yn=null,this.uh()),null!==i){if(i.ln()===i.fn()){var c=this.Xh(),f=5*(null===c||this.oh()||this.lh()?1:c.Qh());i=new nt(i.ln()-f,i.fn()+f)}this.dh(i)}else null===this.On&&this.dh(new nt(-.5,.5));this.Pn.Fn=!0}},t.prototype.Sh=function(){return this.oh()?ut:this.lh()?lt:this.En()?ft:null},t.prototype.Kh=function(t,i){return void 0===this.Gn.priceFormatter?(void 0===i&&(i=this.Yh()),i.format(t)):this.Gn.priceFormatter(t)},t}();function xt(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(bt||(bt={}));var St=function(t){return t.getUTCFullYear()};var Pt=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.es=t,this.us=i}return t.prototype.os=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return G(St(t),4)}(t)).replace(/yy/g,function(t){return G(St(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return G(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return G(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.es,this.us)},t}(),Ct=function(){function t(t){this.ls=t||"%h:%m:%s"}return t.prototype.os=function(t){return this.ls.replace("%h",G(t.getUTCHours(),2)).replace("%m",G(t.getUTCMinutes(),2)).replace("%s",G(t.getUTCSeconds(),2))},t}(),kt={fs:"yyyy-MM-dd",cs:"%h:%m:%s",vs:" ",_s:"default"},At=function(){function t(t){void 0===t&&(t={});var i=f(f({},kt),t);this.ds=new Pt(i.fs,i._s),this.ws=new Ct(i.cs),this.Ms=i.vs}return t.prototype.os=function(t){return""+this.ds.os(t)+this.Ms+this.ws.os(t)},t}(),Ot=function(){function t(t,i){void 0===i&&(i=50),this.bs=0,this.gs=1,this.ps=1,this.ys=new Map,this.ks=new Map,this.xs=t,this.Ns=i}return t.prototype.os=function(t){var i=void 0===t.Ss?new Date(1e3*t.Cs).getTime():new Date(Date.UTC(t.Ss.year,t.Ss.month-1,t.Ss.day)).getTime(),n=this.ys.get(i);if(void 0!==n)return n.Ds;if(this.bs===this.Ns){var e=this.ks.get(this.ps);this.ks.delete(this.ps),this.ys.delete(y(e)),this.ps++,this.bs--}var r=this.xs(t);return this.ys.set(i,{Ds:r,Ts:this.gs}),this.ks.set(this.gs,i),this.bs++,this.gs++,r},t}(),Tt=function(){function t(t,i){v(t<=i,"right should be >= left"),this.Bs=t,this.Es=i}return t.prototype.hs=function(){return this.Bs},t.prototype.ss=function(){return this.Es},t.prototype.Ls=function(){return this.Es-this.Bs+1},t.prototype.As=function(t){return this.Bs<=t&&t<=this.Es},t.prototype.an=function(t){return this.Bs===t.hs()&&this.Es===t.ss()},t}();function Et(t,i){return null===t||null===i?t===i:t.an(i)}var Bt,It=function(){function t(){this.Vs=new Map,this.ys=null}return t.prototype.Os=function(t){var i=this;this.ys=null,this.Vs.clear(),t.forEach((function(t,n){var e=i.Vs.get(t.zs);void 0===e&&(e=[],i.Vs.set(t.zs,e)),e.push({Ps:n,P:t.P,Fs:t.zs})}))},t.prototype.Is=function(t,i){var n=Math.ceil(i/t);return null!==this.ys&&this.ys.Ws===n||(this.ys={Ln:this.Rs(n),Ws:n}),this.ys.Ln},t.prototype.Rs=function(t){for(var i=[],n=0,e=Array.from(this.Vs.keys()).sort((function(t,i){return i-t}));n<e.length;n++){var r=e[n];if(this.Vs.get(r)){var s=i;i=[];for(var o=s.length,h=0,u=y(this.Vs.get(r)),a=u.length,l=1/0,c=-1/0,f=0;f<a;f++){for(var p=u[f],v=p.Ps;h<o;){var d=s[h],g=d.Ps;if(!(g<v)){l=g;break}h++,i.push(d),c=g,l=1/0}l-v>=t&&v-c>=t&&(i.push(p),c=v)}for(;h<o;h++)i.push(s[h])}}return i},t}(),Dt=function(){function t(t){this.js=t}return t.prototype.Us=function(){return null===this.js?null:new Tt(Math.floor(this.js.hs()),Math.ceil(this.js.ss()))},t.prototype.qs=function(){return this.js},t.Hs=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Bt||(Bt={}));var Vt=function(){function t(t,i,n){this.Ys=0,this.Ks=null,this.$s=[],this.$n=null,this.Kn=null,this.Xs=new It,this.Zs=new Map,this.Js=Dt.Hs(),this.Gs=!0,this.Qs=new it,this.tr=new it,this.ir=new it,this.nr=null,this.hr=null,this.sr=[],this.xi=i,this.Gn=n,this.rr=i.rightOffset,this.er=i.barSpacing,this.hi=t,this.ur()}return t.prototype.I=function(){return this.xi},t.prototype.ar=function(t){m(this.Gn,t),this.lr(),this.ur()},t.prototype.hh=function(t,i){var n;m(this.xi,t),this.xi.fixLeftEdge&&this.cr(),this.xi.fixRightEdge&&this.vr(),void 0!==t.barSpacing&&this.hi._r(t.barSpacing),void 0!==t.rightOffset&&this.hi.dr(t.rightOffset),void 0!==t.minBarSpacing&&this.hi._r(null!==(n=t.barSpacing)&&void 0!==n?n:this.er),this.lr(),this.ur(),this.ir.hn()},t.prototype.si=function(t){var i;return(null===(i=this.$s[t])||void 0===i?void 0:i.P)||null},t.prototype.wr=function(t,i){if(this.$s.length<1)return null;if(t.Cs>this.$s[this.$s.length-1].P.Cs)return i?this.$s.length-1:null;for(var n=0;n<this.$s.length;++n){if(t.Cs===this.$s[n].P.Cs)return n;if(t.Cs<this.$s[n].P.Cs)return i?n:null}return null},t.prototype.Qt=function(){return 0===this.Ys||0===this.$s.length},t.prototype.Mr=function(){return this.br(),this.Js.Us()},t.prototype.mr=function(){return this.br(),this.Js.qs()},t.prototype.gr=function(){var t=this.Mr();if(null===t)return null;var i={from:t.hs(),to:t.ss()};return this.pr(i)},t.prototype.pr=function(t){var i=Math.round(t.from),n=Math.round(t.to),e=d(this.yr()),r=d(this.kr());return{from:d(this.si(Math.max(e,i))),to:d(this.si(Math.min(r,n)))}},t.prototype.Nr=function(t){return{from:d(this.wr(t.from,!0)),to:d(this.wr(t.to,!0))}},t.prototype.Sr=function(){return this.Xs},t.prototype.dt=function(){return this.Ys},t.prototype.Cr=function(t){if(isFinite(t)&&!(t<=0)&&this.Ys!==t){if(this.xi.lockVisibleTimeRangeOnResize&&this.Ys){var i=this.er*t/this.Ys;this.Dr(i)}if(this.xi.fixLeftEdge){var n=this.Mr();if(null!==n&&n.hs()<=0){var e=this.Ys-t;this.rr-=Math.round(e/this.er)+1}}this.Ys=t,this.Gs=!0,this.Tr(),this.Br()}},t.prototype.G=function(t){if(this.Qt()||!w(t))return 0;var i=this.Er()+this.rr-t;return this.Ys-(i+.5)*this.er-1},t.prototype.Lr=function(t,i){for(var n=this.Er(),e=void 0===i?0:i.from,r=void 0===i?t.length:i.to,s=e;s<r;s++){var o=t[s].P,h=n+this.rr-o,u=this.Ys-(h+.5)*this.er-1;t[s].g=u}},t.prototype.Ar=function(t){return Math.ceil(this.Vr(t))},t.prototype.dr=function(t){this.Gs=!0,this.rr=t,this.Br(),this.hi.Or(),this.hi.zr()},t.prototype.Pr=function(){return this.er},t.prototype._r=function(t){this.Dr(t),this.Br(),this.hi.Or(),this.hi.zr()},t.prototype.Fr=function(){return this.rr},t.prototype.Ln=function(){if(this.Qt())return null;if(null!==this.hr)return this.hr;for(var t=this.er,i=5*(this.hi.I().layout.fontSize+4),n=Math.round(i/t),e=d(this.Mr()),r=Math.max(e.hs(),e.hs()-n),s=Math.max(e.ss(),e.ss()-n),o=0,h=0,u=this.Xs.Is(t,i);h<u.length;h++){var a=u[h];if(r<=a.Ps&&a.Ps<=s){var l=this.si(a.Ps);if(null!==l){if(o<this.sr.length){var c=this.sr[o];c.Dn=this.G(a.Ps),c.Tn=this.Ir(l,a.Fs),c.Fs=a.Fs}else this.sr.push({Dn:this.G(a.Ps),Tn:this.Ir(l,a.Fs),Fs:a.Fs});o++}}}return this.sr.length=o,this.hr=this.sr,this.sr},t.prototype.Wr=function(){this.Gs=!0,this._r(this.xi.barSpacing),this.dr(this.xi.rightOffset)},t.prototype.Rr=function(t){this.Gs=!0,this.Ks=t,this.Br(),this.cr()},t.prototype.jr=function(t,i){var n=this.Vr(t),e=this.Pr(),r=e+i*(e/10);this._r(r),this.xi.rightBarStaysOnScroll||this.dr(this.Fr()+(n-this.Vr(t)))},t.prototype.Wh=function(t){this.$n&&this.Hh(),null===this.Kn&&null===this.nr&&(this.Qt()||(this.Kn=t,this.Ur()))},t.prototype.Rh=function(t){if(null!==this.nr){var i=et(this.Ys-t,0,this.Ys),n=et(this.Ys-d(this.Kn),0,this.Ys);0!==i&&0!==n&&this._r(this.nr.Pr*i/n)}},t.prototype.jh=function(){null!==this.Kn&&(this.Kn=null,this.qr())},t.prototype.Uh=function(t){null===this.$n&&null===this.nr&&(this.Qt()||(this.$n=t,this.Ur()))},t.prototype.qh=function(t){if(null!==this.$n){var i=(this.$n-t)/this.Pr();this.rr=d(this.nr).Fr+i,this.Gs=!0,this.Br()}},t.prototype.Hh=function(){null!==this.$n&&(this.$n=null,this.qr())},t.prototype.Hr=function(){this.Yr(this.xi.rightOffset)},t.prototype.Yr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.rr,r=Date.now();!function s(){var o=(Date.now()-r)/i,h=o>=1,u=h?t:e+(t-e)*o;n.dr(u),h||setTimeout(s,20)}()},t.prototype.V=function(t){this.Gs=!0,this.$s=t,this.Xs.Os(t),this.Br()},t.prototype.Kr=function(){return this.Qs},t.prototype.$r=function(){return this.tr},t.prototype.Xr=function(){return this.ir},t.prototype.Er=function(){return this.Ks||0},t.prototype.Zr=function(t){var i=t.Ls();this.Dr(this.Ys/i),this.rr=t.ss()-this.Er(),this.Br(),this.Gs=!0,this.hi.Or(),this.hi.zr()},t.prototype.Jr=function(){var t=this.yr(),i=this.kr();null!==t&&null!==i&&this.Zr(new Tt(t,i+this.xi.rightOffset))},t.prototype.Gr=function(t){var i=new Tt(t.from,t.to);this.Zr(i)},t.prototype.ri=function(t){return void 0!==this.Gn.timeFormatter?this.Gn.timeFormatter(t.Ss||t.Cs):this.Qr.os(new Date(1e3*t.Cs))},t.prototype.yr=function(){return 0===this.$s.length?null:0},t.prototype.kr=function(){return 0===this.$s.length?null:this.$s.length-1},t.prototype.te=function(t){return(this.Ys-1-t)/this.er},t.prototype.Vr=function(t){var i=this.te(t),n=this.Er()+this.rr-i;return Math.round(1e6*n)/1e6},t.prototype.Dr=function(t){var i=this.er;this.er=t,this.Tr(),i!==this.er&&(this.Gs=!0,this.ie())},t.prototype.br=function(){if(this.Gs)if(this.Gs=!1,this.Qt())this.ne(Dt.Hs());else{var t=this.Er(),i=this.Ys/this.er,n=this.rr+t,e=new Tt(n-i+1,n);this.ne(new Dt(e))}},t.prototype.Tr=function(){var t=this.he();if(this.er<t&&(this.er=t,this.Gs=!0),0!==this.Ys){var i=.5*this.Ys;this.er>i&&(this.er=i,this.Gs=!0)}},t.prototype.he=function(){return this.xi.fixLeftEdge&&this.xi.fixRightEdge?this.Ys/this.$s.length:this.xi.minBarSpacing},t.prototype.Br=function(){var t=this.se();this.rr>t&&(this.rr=t,this.Gs=!0);var i=this.re();null!==i&&this.rr<i&&(this.rr=i,this.Gs=!0)},t.prototype.re=function(){var t=this.yr(),i=this.Ks;return null===t||null===i?null:t-i-1+(this.xi.fixLeftEdge?this.Ys/this.er:Math.min(2,this.$s.length))},t.prototype.se=function(){return this.xi.fixRightEdge?0:this.Ys/this.er-Math.min(2,this.$s.length)},t.prototype.Ur=function(){this.nr={Pr:this.Pr(),Fr:this.Fr()}},t.prototype.qr=function(){this.nr=null},t.prototype.Ir=function(t,i){var n=this,e=this.Zs.get(i);return void 0===e&&(e=new Ot((function(t){return n.ee(t,i)})),this.Zs.set(i,e)),e.os(t)},t.prototype.ee=function(t,i){var n,e,r=this.xi.timeVisible;return e=i<20&&r?this.xi.secondsVisible?4:3:i<40&&r?3:i<50||i<60?2:i<70?1:0,void 0!==this.xi.tickMarkFormatter?this.xi.tickMarkFormatter(null!==(n=t.Ss)&&void 0!==n?n:t.Cs,e,this.Gn.locale):function(t,i,n){var e={};switch(i){case 0:e.year="numeric";break;case 1:e.month="short";break;case 2:e.day="numeric";break;case 3:e.hour12=!1,e.hour="2-digit",e.minute="2-digit";break;case 4:e.hour12=!1,e.hour="2-digit",e.minute="2-digit",e.second="2-digit"}var r=void 0===t.Ss?new Date(1e3*t.Cs):new Date(Date.UTC(t.Ss.year,t.Ss.month-1,t.Ss.day));return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()).toLocaleString(n,e)}(t,e,this.Gn.locale)},t.prototype.ne=function(t){var i=this.Js;this.Js=t,Et(i.Us(),this.Js.Us())||this.Qs.hn(),Et(i.qs(),this.Js.qs())||this.tr.hn(),this.ie()},t.prototype.ie=function(){this.hr=null},t.prototype.lr=function(){this.ie(),this.Zs.clear()},t.prototype.ur=function(){var t=this.Gn.dateFormat;this.xi.timeVisible?this.Qr=new At({fs:t,cs:this.xi.secondsVisible?"%h:%m:%s":"%h:%m",vs:"   ",_s:this.Gn.locale}):this.Qr=new Pt(t,this.Gn.locale)},t.prototype.cr=function(){if(this.xi.fixLeftEdge){var t=this.yr();if(null!==t){var i=d(this.Mr()).hs()-t;if(i<0){var n=this.rr-i-1;this.dr(n)}this.Tr()}}},t.prototype.vr=function(){this.Br(),this.Tr()},t}();function Lt(t){return!b(t)&&!M(t)}function Ft(t){return b(t)}var zt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Nt(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i=zt),""+n+t+"px "+i}var Rt=function(){function t(t){this.ue={Dt:1,Ct:4,zt:NaN,xt:"",ae:"",et:"",Bt:0,Et:0,Lt:0,Tt:0,Ot:0},this.L=t}return t.prototype.I=function(){var t=this.ue,i=this.oe(),n=this.le();return t.zt===i&&t.ae===n||(t.zt=i,t.ae=n,t.xt=Nt(i,n),t.Tt=Math.floor(i/3.5),t.Bt=t.Tt,t.Et=Math.max(Math.ceil(i/2-t.Ct/2),0),t.Lt=Math.ceil(i/2+t.Ct/2),t.Ot=Math.round(i/10)),t.et=this.fe(),this.ue},t.prototype.fe=function(){return this.L.I().layout.textColor},t.prototype.oe=function(){return this.L.I().layout.fontSize},t.prototype.le=function(){return this.L.I().layout.fontFamily},t}();function Jt(t){return"left"===t||"right"===t}var Yt=function(){function t(t){this.ce=new Map,this.ve=!1,this._e=[],this.de=t}return t.prototype.we=function(t,i){var n=function(t,i){return void 0===t?i:{Me:Math.max(t.Me,i.Me),fh:t.fh||i.fh}}(this.ce.get(t),i);this.ce.set(t,n)},t.prototype.be=function(){return this.de},t.prototype.me=function(t){var i=this.ce.get(t);return void 0===i?{Me:this.de}:{Me:Math.max(this.de,i.Me),fh:i.fh}},t.prototype.ge=function(){this._e=[{pe:0}]},t.prototype.ye=function(t){this._e=[{pe:1,J:t}]},t.prototype.ke=function(){this._e=[{pe:4}]},t.prototype._r=function(t){this._e.push({pe:2,J:t})},t.prototype.dr=function(t){this._e.push({pe:3,J:t})},t.prototype.xe=function(){return this._e},t.prototype.vn=function(t){var i=this;this.ve=this.ve||t.ve,this._e=this._e.concat(t._e);for(var n=0,e=t._e;n<e.length;n++){var r=e[n];this.Ne(r)}this.de=Math.max(this.de,t.de),t.ce.forEach((function(t,n){i.we(n,t)}))},t.prototype.Ne=function(t){switch(t.pe){case 0:this.ge();break;case 1:this.ye(t.J);break;case 2:this._r(t.J);break;case 3:this.dr(t.J);break;case 4:this.ke()}},t}(),jt=function(){function t(t){this.Se=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ce(t):t<999995?i+this.Ce(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ce(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ce(t/1e9)+"B")},t.prototype.Ce=function(t){var i=Math.pow(10,this.Se);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Se).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Ut(t,i,n,e){if(0!==i.length){var r=i[e.from].g,s=i[e.from].p;t.moveTo(r,s);for(var o=e.from+1;o<e.to;++o){var h=i[o];if(1===n){var u=i[o-1].p,a=h.g;t.lineTo(a,u)}t.lineTo(h.g,h.p)}}}var Ht=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.strokeStyle=this.v.S,t.lineWidth=this.v.rt,u(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],n=this.v.De/2;t.moveTo(i.g-n,this.v.Te),t.lineTo(i.g-n,i.p),t.lineTo(i.g+n,i.p),t.lineTo(i.g+n,this.v.Te)}else t.moveTo(this.v.m[this.v.M.from].g,this.v.Te),t.lineTo(this.v.m[this.v.M.from].g,this.v.m[this.v.M.from].p),Ut(t,this.v.m,this.v.Be,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].g,this.v.Te),t.lineTo(this.v.m[this.v.M.from].g,this.v.Te));t.closePath();var e=t.createLinearGradient(0,0,0,this.v.Te);e.addColorStop(0,this.v.Ee),e.addColorStop(1,this.v.Le),t.fillStyle=e,t.fill()}},i}(k),Wt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,u(t,this.v.ut),t.strokeStyle=this.v.S,t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.g-this.v.De/2,i.p),t.lineTo(i.g+this.v.De/2,i.p)}else Ut(t,this.v.m,this.v.Be,this.v.M);t.stroke()}},i}(k);function Qt(t,i,n,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);for(var s=r-e;0<s;){var o=s>>1,h=e+o;n(t[h],i)?(e=h+1,s-=o+1):s=o}return e}function qt(t,i,n,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);for(var s=r-e;0<s;){var o=s>>1,h=e+o;n(i,t[h])?s=o:(e=h+1,s-=o+1)}return e}function Zt(t,i){return t.P<i}function $t(t,i){return t<i.P}function Xt(t,i,n){var e=i.hs(),r=i.ss(),s=Qt(t,e,Zt),o=qt(t,r,$t);if(!n)return{from:s,to:o};var h=s,u=o;return s>0&&s<t.length&&t[s].P>=e&&(h=s-1),o>0&&o<t.length&&t[o-1].P<=r&&(u=o+1),{from:h,to:u}}var Gt=function(){function t(t,i,n){this.Ae=!0,this.Ve=!0,this.Oe=!0,this.ze=[],this.Pe=null,this.Fe=t,this.Ie=i,this.We=n}return t.prototype.V=function(t){this.Ae=!0,"data"===t&&(this.Ve=!0),"options"===t&&(this.Oe=!0)},t.prototype.Re=function(){this.Ve&&(this.je(),this.Ve=!1),this.Ae&&(this.Ue(),this.Ae=!1),this.Oe&&(this.qe(),this.Oe=!1)},t.prototype.He=function(){this.Pe=null},t.prototype.Ue=function(){var t=this.Fe.Z(),i=this.Ie.U();if(this.He(),!i.Qt()&&!t.Qt()){var n=i.Mr();if(null!==n&&0!==this.Fe.qi().Ye()){var e=this.Fe.Y();null!==e&&(this.Pe=Xt(this.ze,n,this.We),this.Ke(t,i,e.J))}}},t}(),Kt=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return c(i,t),i.prototype.Ke=function(t,i,n){i.Lr(this.ze,P(this.Pe)),t.Nh(this.ze,n,P(this.Pe))},i.prototype.$e=function(t,i){return{P:t,F:i,g:NaN,p:NaN}},i.prototype.qe=function(){},i.prototype.je=function(){var t=this,i=this.Fe.Xe();this.ze=this.Fe.qi().Ze().map((function(n){var e=n.J[3];return t.Je(n.Ps,e,i)}))},i}(Gt),ti=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.ot=new C,e.Ge=new Ht,e.Qe=new Wt,e.ot.i([e.Ge,e.Qe]),e}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={Be:n.lineType,m:this.ze,S:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,Ee:n.topColor,Le:n.bottomColor,Te:t,M:this.Pe,De:this.Ie.U().Pr()};return this.Ge._(e),this.Qe._(e),this.ot},i.prototype.Je=function(t,i){return this.$e(t,i)},i}(Kt),ii=function(){function t(){this.tt=null,this.tu=0,this.iu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){this.tu=this.nu(i),this.tu>=2&&Math.max(1,Math.floor(i))%2!=this.tu%2&&this.tu--,this.iu=this.tt.hu?Math.min(this.tu,Math.floor(i)):this.tu;for(var r=null,s=this.iu<=this.tu&&this.tt.Pr>=Math.floor(1.5*i),o=this.tt.M.from;o<this.tt.M.to;++o){var h=this.tt.qi[o];r!==h.et&&(t.fillStyle=h.et,r=h.et);var u=Math.floor(.5*this.iu),a=Math.round(h.g*i),l=a-u,c=this.iu,f=l+c-1,p=Math.min(h.Th,h.Bh),v=Math.max(h.Th,h.Bh),y=Math.round(p*i)-u,d=Math.round(v*i)+u,g=Math.max(d-y,this.iu);t.fillRect(l,y,c,g);var m=Math.ceil(1.5*this.tu);if(s){if(this.tt.su){var b=a-m,w=Math.max(y,Math.round(h.Dh*i)-u),M=w+c-1;M>y+g-1&&(w=(M=y+g-1)-c+1),t.fillRect(b,w,l-b,M-w+1)}var _=a+m,x=Math.max(y,Math.round(h.Eh*i)-u),S=x+c-1;S>y+g-1&&(x=(S=y+g-1)-c+1),t.fillRect(f+1,x,_-f,S-x+1)}}}},t.prototype.nu=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(d(this.tt).Pr,t)))},t}(),ni=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return c(i,t),i.prototype.Ke=function(t,i,n){i.Lr(this.ze,P(this.Pe)),t.Ch(this.ze,n,P(this.Pe))},i.prototype.ru=function(t,i,n){return{P:t,open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3],g:NaN,Dh:NaN,Th:NaN,Bh:NaN,Eh:NaN}},i.prototype.je=function(){var t=this,i=this.Fe.Xe();this.ze=this.Fe.qi().Ze().map((function(n){return t.Je(n.Ps,n,i)}))},i}(Gt),ei=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new ii,i}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={qi:this.ze,Pr:this.Ie.U().Pr(),su:n.openVisible,hu:n.thinBars,M:this.Pe};return this.ot._(e),this.ot},i.prototype.qe=function(){var t=this;this.ze.forEach((function(i){i.et=t.Fe.Xe().uu(i.P).eu}))},i.prototype.Je=function(t,i,n){return f(f({},this.ru(t,i,n)),{et:n.uu(t).eu})},i}(ni),ri=function(){function t(){this.tt=null,this.tu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){this.tu=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),e=Math.floor(t*n*i),r=Math.floor(t*i),s=Math.min(e,r);return Math.max(Math.floor(i),s)}(this.tt.Pr,i),this.tu>=2&&Math.floor(i)%2!=this.tu%2&&this.tu--;var r=this.tt.qi;this.tt.au&&this.ou(t,r,this.tt.M,i),this.tt.lu&&this.fu(t,r,this.tt.M,this.tt.Pr,i);var s=this.cu(i);(!this.tt.lu||this.tu>2*s)&&this.vu(t,r,this.tt.M,i)}},t.prototype.ou=function(t,i,n,e){if(null!==this.tt){var r="",s=Math.min(Math.floor(e),Math.floor(this.tt.Pr*e));s=Math.max(Math.floor(e),Math.min(s,this.tu));for(var o=Math.floor(.5*s),h=null,u=n.from;u<n.to;u++){var a=i[u];a._u!==r&&(t.fillStyle=a._u,r=a._u);var l=Math.round(Math.min(a.Dh,a.Eh)*e),c=Math.round(Math.max(a.Dh,a.Eh)*e),f=Math.round(a.Th*e),p=Math.round(a.Bh*e),v=Math.round(e*a.g)-o,y=v+s-1;null!==h&&(v=Math.max(h+1,v),v=Math.min(v,y));var d=y-v+1;t.fillRect(v,f,d,l-f),t.fillRect(v,c+1,d,p-c),h=y}}},t.prototype.cu=function(t){var i=Math.floor(1*t);this.tu<=2*i&&(i=Math.floor(.5*(this.tu-1)));var n=Math.max(Math.floor(t),i);return this.tu<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.fu=function(t,i,n,e,r){if(null!==this.tt)for(var s="",o=this.cu(r),h=null,u=n.from;u<n.to;u++){var a=i[u];a.$!==s&&(t.fillStyle=a.$,s=a.$);var l=Math.round(a.g*r)-Math.floor(.5*this.tu),c=l+this.tu-1,f=Math.round(Math.min(a.Dh,a.Eh)*r),p=Math.round(Math.max(a.Dh,a.Eh)*r);if(null!==h&&(l=Math.max(h+1,l),l=Math.min(l,c)),this.tt.Pr*r>2*o)R(t,l,f,c-l+1,p-f+1,o);else{var v=c-l+1;t.fillRect(l,f,v,p-f+1)}h=c}},t.prototype.vu=function(t,i,n,e){if(null!==this.tt)for(var r="",s=this.cu(e),o=n.from;o<n.to;o++){var h=i[o],u=Math.round(Math.min(h.Dh,h.Eh)*e),a=Math.round(Math.max(h.Dh,h.Eh)*e),l=Math.round(h.g*e)-Math.floor(.5*this.tu),c=l+this.tu-1;if(h.et!==r){var f=h.et;t.fillStyle=f,r=f}this.tt.lu&&(l+=s,u+=s,c-=s,a-=s),u>a||t.fillRect(l,u,c-l+1,a-u+1)}},t}(),si=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new ri,i}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={qi:this.ze,Pr:this.Ie.U().Pr(),au:n.wickVisible,lu:n.borderVisible,M:this.Pe};return this.ot._(e),this.ot},i.prototype.qe=function(){var t=this;this.ze.forEach((function(i){var n=t.Fe.Xe().uu(i.P);i.et=n.eu,i._u=n.du,i.$=n.wu}))},i.prototype.Je=function(t,i,n){var e=n.uu(t);return f(f({},this.ru(t,i,n)),{et:e.eu,_u:e.du,$:e.wu})},i}(ni),oi=function(){function t(){this.tt=null,this.Mu=[]}return t.prototype._=function(t){this.tt=t,this.Mu=[]},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.Mu.length||this.bu(i);for(var r=Math.max(1,Math.floor(i)),s=Math.round(this.tt.mu*i)-Math.floor(r/2),o=s+r,h=this.tt.M.from;h<this.tt.M.to;h++){var u=this.tt.m[h],a=this.Mu[h-this.tt.M.from],l=Math.round(u.p*i);t.fillStyle=u.et;var c=void 0,f=void 0;l<=s?(c=l,f=o):(c=s,f=l-Math.floor(r/2)+r),t.fillRect(a.hs,c,a.ss-a.hs+1,f-c)}}},t.prototype.bu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.Pr*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.Pr*t)-i;this.Mu=new Array(this.tt.M.to-this.tt.M.from);for(var e=this.tt.M.from;e<this.tt.M.to;e++){var r,s=this.tt.m[e],o=Math.round(s.g*t),h=void 0,u=void 0;n%2?(h=o-(r=(n-1)/2),u=o+r):(h=o-(r=n/2),u=o+r-1),this.Mu[e-this.tt.M.from]={hs:h,ss:u,gu:o,pu:s.g*t,P:s.P}}for(e=this.tt.M.from+1;e<this.tt.M.to;e++){var a=this.Mu[e-this.tt.M.from],l=this.Mu[e-this.tt.M.from-1];a.P===l.P+1&&a.hs-l.ss!==i+1&&(l.gu>l.pu?l.ss=a.hs-i-1:a.hs=l.ss+i+1)}var c=Math.ceil(this.tt.Pr*t);for(e=this.tt.M.from;e<this.tt.M.to;e++){(a=this.Mu[e-this.tt.M.from]).ss<a.hs&&(a.ss=a.hs);var f=a.ss-a.hs+1;c=Math.min(f,c)}if(i>0&&c<4)for(e=this.tt.M.from;e<this.tt.M.to;e++)(f=(a=this.Mu[e-this.tt.M.from]).ss-a.hs+1)>c&&(a.gu>a.pu?a.ss-=1:a.hs+=1)}else this.Mu=[]},t}();function hi(t){return{m:[],Pr:t,mu:NaN,M:null}}function ui(t,i,n){return{P:t,F:i,g:NaN,p:NaN,et:n}}var ai=function(t){function i(i,n){var e=t.call(this,i,n,!1)||this;return e.C=new C,e.yu=hi(0),e.ot=new oi,e}return c(i,t),i.prototype.W=function(t,i){return this.Fe.H()?(this.Re(),this.C):null},i.prototype.je=function(){var t=this.Ie.U().Pr();this.yu=hi(t);for(var i=0,n=0,e=this.Fe.I().color,r=0,s=this.Fe.qi().Ze();r<s.length;r++){var o=s[r],h=o.J[3],u=void 0!==o.et?o.et:e,a=ui(o.Ps,h,u);++i<this.yu.m.length?this.yu.m[i]=a:this.yu.m.push(a),this.ze[n++]={P:o.Ps,g:0}}this.ot._(this.yu),this.C.i([this.ot])},i.prototype.qe=function(){},i.prototype.He=function(){t.prototype.He.call(this),this.yu.M=null},i.prototype.Ke=function(t,i,n){if(null!==this.Pe){var e=i.Pr(),r=d(i.Mr()),s=t.X(this.Fe.I().base,n);i.Lr(this.yu.m),t.Nh(this.yu.m,n),this.yu.mu=s,this.yu.M=Xt(this.yu.m,r,!1),this.yu.Pr=e,this.ot._(this.yu)}},i}(Gt),li=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.Qe=new Wt,e}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={m:this.ze,S:n.color,ut:n.lineStyle,Be:n.lineType,rt:n.lineWidth,M:this.Pe,De:this.Ie.U().Pr()};return this.Qe._(e),this.Qe},i.prototype.Je=function(t,i){return this.$e(t,i)},i}(Kt),ci=/[2-9]/g,fi=function(){function t(t){void 0===t&&(t=50),this.ys=new Map,this.ku=0,this.xu=Array.from(new Array(t))}return t.prototype.Nu=function(){this.ys.clear(),this.xu.fill(void 0)},t.prototype.Vt=function(t,i,n){var e=n||ci,r=String(i).replace(e,"0"),s=this.ys.get(r);if(void 0===s){if(0===(s=t.measureText(r).width)&&0!==i.length)return 0;var o=this.xu[this.ku];void 0!==o&&this.ys.delete(o),this.xu[this.ku]=r,this.ku=(this.ku+1)%this.xu.length,this.ys.set(r,s)}return s},t}(),pi=function(){function t(t){this.Su=null,this.ue=null,this.Cu="right",this.Ys=0,this.Du=t}return t.prototype.Tu=function(t,i,n,e){this.Su=t,this.ue=i,this.Ys=n,this.Cu=e},t.prototype.h=function(t,i){null!==this.ue&&null!==this.Su&&this.Su.h(t,this.ue,this.Du,this.Ys,this.Cu,i)},t}(),vi=function(){function t(t,i,n){this.Bu=t,this.Du=new fi(50),this.Eu=i,this.L=n,this.oe=-1,this.ot=new pi(this.Du)}return t.prototype.W=function(t,i){var n=this.L.Lu(this.Eu);if(null===n)return null;var e=n.Au(this.Eu)?n.Ci():this.Eu.Z();if(null===e)return null;var r=n.Vu(e);if("overlay"===r)return null;var s=this.L.Ou();return s.zt!==this.oe&&(this.oe=s.zt,this.Du.Nu()),this.ot.Tu(this.Bu.Xt(),s,i,r),this.ot},t}(),yi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&!1!==this.tt.H){var r=Math.round(this.tt.p*i);if(!(r<0||r>Math.ceil(this.tt.wt*i))){var s=Math.ceil(this.tt.dt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),u(t,this.tt.ut),a(t,r,0,s)}}},t}(),di=function(){function t(t){this.zu={dt:0,wt:0,p:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,H:!1},this.Pu=new yi,this.B=!0,this.Fe=t,this.Ie=t.ct(),this.Pu._(this.zu)}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.Fe.H()?(this.B&&(this.Fu(t,i),this.B=!1),this.Pu):null},t}(),gi=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.Fu=function(t,i){this.zu.H=!1;var n=this.Fe.Z(),e=n.eh().eh;if(2===e||3===e){var r=this.Fe.I();if(r.baseLineVisible&&this.Fe.H()){var s=this.Fe.Y();null!==s&&(this.zu.H=!0,this.zu.p=n.X(s.J,s.J),this.zu.dt=i,this.zu.wt=t,this.zu.et=r.baseLineColor,this.zu.rt=r.baseLineWidth,this.zu.ut=r.baseLineStyle)}}},i}(di);function mi(t,i){return ht(Math.min(Math.max(t,12),30)*i)}function bi(t,i){switch(t){case"arrowDown":case"arrowUp":return mi(i,1);case"circle":return mi(i,.8);case"square":return mi(i,.7)}}function wi(t){return ot(mi(t,1))}function Mi(t){return Math.max(mi(t,.1),3)}function _i(t,i,n,e,r){var s=bi("square",n),o=(s-1)/2,h=t-o,u=i-o;return e>=h&&e<=h+s&&r>=u&&r<=u+s}function xi(t,i,n,e,r){var s=(bi("arrowUp",r)-1)/2,o=(ht(r/2)-1)/2;i.beginPath(),t?(i.moveTo(n-s,e),i.lineTo(n,e-s),i.lineTo(n+s,e),i.lineTo(n+o,e),i.lineTo(n+o,e+s),i.lineTo(n-o,e+s),i.lineTo(n-o,e)):(i.moveTo(n-s,e),i.lineTo(n,e+s),i.lineTo(n+s,e),i.lineTo(n+o,e),i.lineTo(n+o,e-s),i.lineTo(n-o,e-s),i.lineTo(n-o,e)),i.fill()}var Si=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.Du=new fi,i.oe=-1,i.le="",i.Iu="",i}return c(i,t),i.prototype._=function(t){this.tt=t},i.prototype.Tu=function(t,i){this.oe===t&&this.le===i||(this.oe=t,this.le=i,this.Iu=Nt(t,i),this.Du.Nu())},i.prototype.Wu=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var e=this.tt.m[n];if(Ci(e,t,i))return{Ru:e.ju,Uu:e.Uu}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.Iu;for(var e=this.tt.M.from;e<this.tt.M.to;e++){var r=this.tt.m[e];void 0!==r.At&&(r.At.dt=this.Du.Vt(t,r.At.qu),r.At.wt=this.oe),Pi(r,t)}}},i}(k);function Pi(t,i){i.fillStyle=t.et,void 0!==t.At&&function(t,i,n,e){t.fillText(i,n,e)}(i,t.At.qu,t.g-t.At.dt/2,t.At.p),function(t,i){if(0!==t.Ye){switch(t.Hu){case"arrowDown":return void xi(!1,i,t.g,t.p,t.Ye);case"arrowUp":return void xi(!0,i,t.g,t.p,t.Ye);case"circle":return void function(t,i,n,e){var r=(bi("circle",e)-1)/2;t.beginPath(),t.arc(i,n,r,0,2*Math.PI,!1),t.fill()}(i,t.g,t.p,t.Ye);case"square":return void function(t,i,n,e){var r=bi("square",e),s=(r-1)/2,o=i-s,h=n-s;t.fillRect(o,h,r,r)}(i,t.g,t.p,t.Ye)}t.Hu}}(t,i)}function Ci(t,i,n){return!(void 0===t.At||!function(t,i,n,e,r,s){var o=e/2;return r>=t&&r<=t+n&&s>=i-o&&s<=i+o}(t.g,t.At.p,t.At.dt,t.At.wt,i,n))||function(t,i,n){if(0===t.Ye)return!1;switch(t.Hu){case"arrowDown":case"arrowUp":return function(t,i,n,e,r,s){return _i(i,n,e,r,s)}(0,t.g,t.p,t.Ye,i,n);case"circle":return function(t,i,n,e,r){var s=2+bi("circle",n)/2,o=t-e,h=i-r;return Math.sqrt(o*o+h*h)<=s}(t.g,t.p,t.Ye,i,n);case"square":return _i(t.g,t.p,t.Ye,i,n)}t.Hu}(t,i,n)}function ki(t,i,n,e,r,s,o,h,u){var a=b(n)?n:n.close,l=b(n)?n:n.high,c=b(n)?n:n.low,f=b(i.size)?Math.max(i.size,0):1,p=wi(h.Pr())*f,v=p/2;switch(t.Ye=p,i.position){case"inBar":return t.p=o.X(a,u),void(void 0!==t.At&&(t.At.p=t.p+v+s+.6*r));case"aboveBar":return t.p=o.X(l,u)-v-e.Yu,void 0!==t.At&&(t.At.p=t.p-v-.6*r,e.Yu+=1.2*r),void(e.Yu+=p+s);case"belowBar":return t.p=o.X(c,u)+v+e.Ku,void 0!==t.At&&(t.At.p=t.p+v+s+.6*r,e.Ku+=1.2*r),void(e.Ku+=p+s)}i.position}var Ai=function(){function t(t,i){this.B=!0,this.$u=!0,this.Xu=!0,this.Zu=null,this.ot=new Si,this.Ju=t,this.hi=i,this.tt={m:[],M:null}}return t.prototype.V=function(t){this.B=!0,this.Xu=!0,"data"===t&&(this.$u=!0)},t.prototype.W=function(t,i,n){if(!this.Ju.H())return null;this.B&&this.Re();var e=this.hi.I().layout;return this.ot.Tu(e.fontSize,e.fontFamily),this.ot._(this.tt),this.ot},t.prototype.Gu=function(){if(this.Xu){if(this.Ju.Qu().length>0){var t=this.hi.U().Pr(),i=Mi(t),n=1.5*wi(t)+2*i;this.Zu={above:n,below:n}}else this.Zu=null;this.Xu=!1}return this.Zu},t.prototype.Re=function(){var t=this.Ju.Z(),i=this.hi.U(),n=this.Ju.Qu();this.$u&&(this.tt.m=n.map((function(t){return{P:t.time,g:0,p:0,Ye:0,Hu:t.shape,et:t.color,ju:t.ju,Uu:t.id,At:void 0}})),this.$u=!1);var e=this.hi.I().layout;this.tt.M=null;var r=i.Mr();if(null!==r){var s=this.Ju.Y();if(null!==s&&0!==this.tt.m.length){var o=NaN,h=Mi(i.Pr()),u={Yu:h,Ku:h};this.tt.M=Xt(this.tt.m,r,!0);for(var a=this.tt.M.from;a<this.tt.M.to;a++){var l=n[a];l.time!==o&&(u.Yu=h,u.Ku=h,o=l.time);var c=this.tt.m[a];c.g=i.G(l.time),void 0!==l.text&&l.text.length>0&&(c.At={qu:l.text,p:0,dt:0,wt:0});var f=this.Ju.ta(l.time);null!==f&&ki(c,l,f,u,e.fontSize,h,t,i,s.J)}this.B=!1}}},t}(),Oi=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.Fu=function(t,i){var n=this.zu;n.H=!1;var e=this.Fe.I();if(e.priceLineVisible&&this.Fe.H()){var r=this.Fe.ia(0===e.priceLineSource);r.na||(n.H=!0,n.p=r.Pt,n.et=this.Fe.ha(r.et),n.dt=i,n.wt=t,n.rt=e.priceLineWidth,n.ut=e.priceLineStyle)}},i}(di),Ti=function(t){function i(i){var n=t.call(this)||this;return n.lt=i,n}return c(i,t),i.prototype.Zt=function(t,i,n){if(t.H=!1,i.H=!1,this.lt.H()){var e=this.lt.I(),r=e.lastValueVisible,s=""!==this.lt.sa(),o=0===e.seriesLastValueMode,h=this.lt.ia(!1);if(!h.na){r&&(t.At=this.ra(h,r,o),t.H=0!==t.At.length),(s||o)&&(i.At=this.ea(h,r,s,o),i.H=i.At.length>0);var u=this.lt.ha(h.et),a=N(u);n.gt=a.gt,n.et=a.yt,n.Pt=h.Pt,i.$=this.lt.ct().I().layout.backgroundColor,t.$=u}}},i.prototype.ea=function(t,i,n,e){var r="",s=this.lt.sa();return n&&0!==s.length&&(r+=s+" "),i&&e&&(r+=this.lt.Z().oh()?t.ua:t.aa),r.trim()},i.prototype.ra=function(t,i,n){return i?n?this.lt.Z().oh()?t.aa:t.ua:t.At:""},i}(H),Ei=function(){function t(t,i){this.On=t,this.oa=i||null}return t.prototype.yh=function(){return this.On},t.prototype.rs=function(){return this.oa},t.prototype.wn=function(){return null===this.On?null:{priceRange:this.On.wn(),margins:this.oa||void 0}},t.Mn=function(i){return null===i?null:new t(nt.Mn(i.priceRange),i.margins)},t}(),Bi=function(t){function i(i,n){var e=t.call(this,i)||this;return e.la=n,e}return c(i,t),i.prototype.Fu=function(t,i){var n=this.zu;if(n.H=!1,this.Fe.H()){var e=this.la.fa();if(null!==e){var r=this.la.I();n.H=!0,n.p=e,n.et=r.color,n.dt=i,n.wt=t,n.rt=r.lineWidth,n.ut=r.lineStyle}}},i}(di),Ii=function(t){function i(i,n){var e=t.call(this)||this;return e.Ju=i,e.la=n,e}return c(i,t),i.prototype.Zt=function(t,i,n){t.H=!1,i.H=!1;var e=this.la.I(),r=e.axisLabelVisible,s=""!==e.title;if(r&&this.Ju.H()){var o=this.la.fa();if(null!==o){s&&(i.At=e.title,i.H=!0),i.$=this.Ju.ct().I().layout.backgroundColor,t.At=this.Ju.Z().$h(e.price),t.H=!0;var h=N(e.color);n.gt=h.gt,n.et=h.yt,n.Pt=o}}},i}(H),Di=function(){function t(t,i){this.Ju=t,this.xi=i,this.ca=new Bi(t,this),this.Bu=new Ii(t,this),this.va=new vi(this.Bu,t,t.ct())}return t.prototype.hh=function(t){m(this.xi,t),this.V(),this.Ju.ct().zr()},t.prototype.I=function(){return this.xi},t.prototype.ci=function(){return[this.ca,this.va]},t.prototype._a=function(){return this.Bu},t.prototype.V=function(){this.ca.V(),this.Bu.V()},t.prototype.fa=function(){var t=this.Ju,i=t.Z();if(t.ct().U().Qt()||i.Qt())return null;var n=t.Y();return null===n?null:i.X(this.xi.price,n.J)},t}(),Vi=function(t){function i(i){var n=t.call(this)||this;return n.hi=i,n}return c(i,t),i.prototype.ct=function(){return this.hi},i}($),Li={eu:"",wu:"",du:""},Fi=function(){function t(t){this.Ju=t}return t.prototype.uu=function(t,i){var n=this.Ju.da(),e=this.Ju.I();switch(n){case"Line":return this.wa(e);case"Area":return this.Ma(e);case"Bar":return this.ba(e,t,i);case"Candlestick":return this.ma(e,t,i);case"Histogram":return this.ga(e,t,i)}throw new Error("Unknown chart style")},t.prototype.ba=function(t,i,n){var e=f({},Li),r=t.upColor,s=t.downColor,o=r,h=s,u=d(this.pa(i,n)),a=g(u.J[0])<=g(u.J[3]);return e.eu=a?r:s,e.wu=a?o:h,e},t.prototype.ma=function(t,i,n){var e=f({},Li),r=t.upColor,s=t.downColor,o=t.borderUpColor,h=t.borderDownColor,u=t.wickUpColor,a=t.wickDownColor,l=d(this.pa(i,n)),c=g(l.J[0])<=g(l.J[3]);return e.eu=c?r:s,e.wu=c?o:h,e.du=c?u:a,e},t.prototype.Ma=function(t){return f(f({},Li),{eu:t.lineColor})},t.prototype.wa=function(t){return f(f({},Li),{eu:t.color})},t.prototype.ga=function(t,i,n){var e=f({},Li),r=d(this.pa(i,n));return e.eu=void 0!==r.et?r.et:t.color,e},t.prototype.pa=function(t,i){return void 0!==i?i.J:this.Ju.qi().ya(t)},t}(),zi=function(){function t(){this.ka=[],this.xa=new Map,this.Na=new Map}return t.prototype.Sa=function(){this.ka=[],this.xa.clear(),this.Na.clear()},t.prototype.Ca=function(){return this.Ye()>0?this.ka[this.ka.length-1]:null},t.prototype.Da=function(){return this.Ye()>0?this.Ta(0):null},t.prototype.Ui=function(){return this.Ye()>0?this.Ta(this.ka.length-1):null},t.prototype.Ye=function(){return this.ka.length},t.prototype.Qt=function(){return 0===this.Ye()},t.prototype.As=function(t){return null!==this.Ba(t,0)},t.prototype.ya=function(t){return this.Ea(t)},t.prototype.Ea=function(t,i){void 0===i&&(i=0);var n=this.Ba(t,i);return null===n?null:f(f({},this.La(n)),{Ps:this.Ta(n)})},t.prototype.Ze=function(){return this.ka},t.prototype.Aa=function(t,i,n){if(this.Qt())return null;for(var e=null,r=0,s=n;r<s.length;r++){var o=s[r];e=Ni(e,this.Va(t,i,o))}return e},t.prototype.vn=function(t){0!==t.length&&(this.Qt()||t[t.length-1].Ps<this.ka[0].Ps?this.Oa(t):t[0].Ps>this.ka[this.ka.length-1].Ps?this.za(t):1!==t.length||t[0].Ps!==this.ka[this.ka.length-1].Ps?this.Pa(t):this.Fa(t[0]))},t.prototype.Ta=function(t){return this.ka[t].Ps},t.prototype.La=function(t){return this.ka[t]},t.prototype.Ba=function(t,i){var n=this.Ia(t);if(null===n&&0!==i)switch(i){case-1:return this.Wa(t);case 1:return this.Ra(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.Wa=function(t){var i=this.ja(t);return i>0&&(i-=1),i!==this.ka.length&&this.Ta(i)<t?i:null},t.prototype.Ra=function(t){var i=this.Ua(t);return i!==this.ka.length&&t<this.Ta(i)?i:null},t.prototype.Ia=function(t){var i=this.ja(t);return i===this.ka.length||t<this.ka[i].Ps?null:i},t.prototype.ja=function(t){return Qt(this.ka,t,(function(t,i){return t.Ps<i}))},t.prototype.Ua=function(t){return qt(this.ka,t,(function(t,i){return i.Ps>t}))},t.prototype.qa=function(t,i,n){for(var e=null,r=t;r<i;r++){var s=this.ka[r].J[n];Number.isNaN(s)||(null===e?e={Ha:s,Ya:s}:(s<e.Ha&&(e.Ha=s),s>e.Ya&&(e.Ya=s)))}return e},t.prototype.Ka=function(t){var i=Math.floor(t.Ps/30);this.xa.forEach((function(t){return t.delete(i)}))},t.prototype.Oa=function(t){v(0!==t.length,"plotRows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=t.concat(this.ka)},t.prototype.za=function(t){v(0!==t.length,"plotRows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=this.ka.concat(t)},t.prototype.Fa=function(t){v(!this.Qt(),"plot list should not be empty"),v(this.ka[this.ka.length-1].Ps===t.Ps,"last row index should match new row index"),this.Ka(t),this.Na.delete(t.Ps),this.ka[this.ka.length-1]=t},t.prototype.Pa=function(t){v(0!==t.length,"plot rows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=function(t,i){for(var n=function(t,i){for(var n=t.length,e=i.length,r=n+e,s=0,o=0;s<n&&o<e;)t[s].Ps<i[o].Ps?s++:t[s].Ps>i[o].Ps?o++:(s++,o++,r--);return r}(t,i),e=new Array(n),r=0,s=0,o=t.length,h=i.length,u=0;r<o&&s<h;)t[r].Ps<i[s].Ps?(e[u]=t[r],r++):t[r].Ps>i[s].Ps?(e[u]=i[s],s++):(e[u]=i[s],r++,s++),u++;for(;r<o;)e[u]=t[r],r++,u++;for(;s<h;)e[u]=i[s],s++,u++;return e}(this.ka,t)},t.prototype.Va=function(t,i,n){if(this.Qt())return null;var e=null,r=d(this.Da()),s=d(this.Ui()),o=Math.max(t,r),h=Math.min(i,s),u=30*Math.ceil(o/30),a=Math.max(u,30*Math.floor(h/30)),l=this.ja(o),c=this.Ua(Math.min(h,u,i));e=Ni(e,this.qa(l,c,n));var f=this.xa.get(n);void 0===f&&(f=new Map,this.xa.set(n,f));for(var p=Math.max(u+1,o);p<a;p+=30){var v=Math.floor(p/30),y=f.get(v);if(void 0===y){var g=this.ja(30*v),m=this.Ua(30*(v+1)-1);y=this.qa(g,m,n),f.set(v,y)}e=Ni(e,y)}return l=this.ja(a),c=this.Ua(h),Ni(e,this.qa(l,c,n))},t}();function Ni(t,i){return null===t?i:null===i?t:{Ha:Math.min(t.Ha,i.Ha),Ya:Math.max(t.Ya,i.Ya)}}var Ri=function(t){function i(i,n,e){var r=t.call(this,i)||this;r.tt=new zi,r.ca=new Oi(r),r.$a=[],r.Xa=new gi(r),r.Za=null,r.Ja=[],r.Ga=[],r.xi=n,r.Qa=e;var s=new Ti(r);return r.bi=[s],r.va=new vi(s,r,i),r.io(),r.no(),r}return c(i,t),i.prototype.rn=function(){},i.prototype.ha=function(t){return this.xi.priceLineColor||t},i.prototype.ia=function(t,i){var n={na:!0},e=this.Z();if(this.ct().U().Qt()||e.Qt()||this.tt.Qt())return n;var r,s,o=this.ct().U().Mr(),h=this.Y();if(null===o||null===h)return n;if(t){var u=this.tt.Ca();if(null===u)return n;r=u,s=u.Ps}else{var a=this.tt.Ea(o.ss(),-1);if(null===a)return n;if(null===(r=this.tt.ya(a.Ps)))return n;s=a.Ps}var l=r.J[3],c=this.Xe().uu(s,{J:r}),f=e.X(l,h.J);return{na:!1,F:i?l:void 0,At:e.ti(l,h.J),ua:e.$h(l),aa:e.Zh(l,h.J),et:c.eu,Pt:f,Ps:s}},i.prototype.Xe=function(){return null!==this.Za||(this.Za=new Fi(this)),this.Za},i.prototype.I=function(){return this.xi},i.prototype.hh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.xi.priceScaleId&&this.ct().ho(this,i),m(this.xi,t),null!==this.ei&&void 0!==t.scaleMargins&&this.ei.hh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.io(),this.ct().so(this),this.ct().ro(),this.Bi.V("options")},i.prototype.eo=function(){this.tt.Sa(),this.no()},i.prototype.uo=function(t,i){i&&this.tt.Sa(),this.tt.vn(t),this.ao(),this.Bi.V("data"),this.Ni.V("data");var n=this.ct().Lu(this);this.ct().oo(n),this.ct().so(this),this.ct().ro(),this.ct().zr()},i.prototype.lo=function(t){this.Ja=t.map((function(t){return f({},t)})),this.ao();var i=this.ct().Lu(this);this.Ni.V("data"),this.ct().oo(i),this.ct().so(this),this.ct().ro(),this.ct().zr()},i.prototype.Qu=function(){return this.Ga},i.prototype.fo=function(t){var i=new Di(this,t);return this.$a.push(i),this.ct().so(this),i},i.prototype.co=function(t){var i=this.$a.indexOf(t);-1!==i&&this.$a.splice(i,1),this.ct().so(this)},i.prototype.da=function(){return this.Qa},i.prototype.Y=function(){var t=this.vo();return null===t?null:{J:t.J[3],Fh:t.P}},i.prototype.vo=function(){var t=this.ct().U().Mr();if(null===t)return null;var i=t.hs();return this.tt.Ea(i,1)},i.prototype.qi=function(){return this.tt},i.prototype.ta=function(t){var i=this.tt.ya(t);return null===i?null:"Bar"===this.Qa||"Candlestick"===this.Qa?{open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3]}:i.J[3]},i.prototype.ci=function(){var t=[];this._o()||t.push(this.Xa);for(var i=0,n=this.$a;i<n.length;i++){var e=n[i];t.push.apply(t,e.ci())}return t.push(this.Bi,this.ca,this.va,this.Ni),t},i.prototype.fi=function(t,i){if(i!==this.ei&&!this._o())return[];for(var n=p([],this.bi),e=0,r=this.$a;e<r.length;e++){var s=r[e];n.push(s._a())}return n},i.prototype.ns=function(t,i){var n=this;if(void 0!==this.xi.autoscaleInfoProvider){var e=this.xi.autoscaleInfoProvider((function(){var e=n.do(t,i);return null===e?null:e.wn()}));return Ei.Mn(e)}return this.do(t,i)},i.prototype.Qh=function(){return this.xi.priceFormat.minMove},i.prototype.Yh=function(){return this.Xn},i.prototype.Wi=function(){this.Bi.V(),this.Ni.V();for(var t=0,i=this.bi;t<i.length;t++)i[t].V();for(var n=0,e=this.$a;n<e.length;n++)e[n].V();this.ca.V(),this.Xa.V()},i.prototype.Z=function(){return d(this.ei)},i.prototype.q=function(t){if("Line"!==this.Qa&&"Area"!==this.Qa||!this.xi.crosshairMarkerVisible)return null;var i=this.tt.ya(t);return null===i?null:{F:i.J[3],N:this.wo(),$:this.Mo(),K:this.bo(t)}},i.prototype.sa=function(){return this.xi.title},i.prototype.H=function(){return this.xi.visible},i.prototype._o=function(){return!Jt(this.Z().nh())},i.prototype.do=function(t,i){if(!w(t)||!w(i)||this.tt.Qt())return null;var n="Line"===this.Qa||"Area"===this.Qa||"Histogram"===this.Qa?[3]:[2,1],e=this.tt.Aa(t,i,n),r=null!==e?new nt(e.Ha,e.Ya):null;if("Histogram"===this.da()){var s=this.xi.base,o=new nt(s,s);r=null!==r?r.vn(o):o}return new Ei(r,this.Ni.Gu())},i.prototype.wo=function(){switch(this.Qa){case"Line":case"Area":return this.xi.crosshairMarkerRadius}return 0},i.prototype.Mo=function(){switch(this.Qa){case"Line":case"Area":var t=this.xi.crosshairMarkerBorderColor;if(0!==t.length)return t}return this.ct().I().layout.backgroundColor},i.prototype.bo=function(t){switch(this.Qa){case"Line":case"Area":var i=this.xi.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Xe().uu(t).eu},i.prototype.io=function(){switch(this.xi.priceFormat.type){case"custom":this.Xn={format:this.xi.priceFormat.formatter};break;case"volume":this.Xn=new jt(this.xi.priceFormat.precision);break;case"percent":this.Xn=new tt(this.xi.priceFormat.precision);break;default:var t=Math.pow(10,this.xi.priceFormat.precision);this.Xn=new K(t,this.xi.priceFormat.minMove*t)}null!==this.ei&&this.ei.sh()},i.prototype.ao=function(){var t=this,i=this.ct().U();if(i.Qt()||0===this.tt.Ye())this.Ga=[];else{var n=d(this.tt.Da());this.Ga=this.Ja.map((function(e,r){var s=d(i.wr(e.time,!0)),o=s<n?1:-1;return{time:d(t.tt.Ea(s,o)).Ps,position:e.position,shape:e.shape,color:e.color,id:e.id,ju:r,text:e.text,size:e.size}}))}},i.prototype.no=function(){switch(this.Ni=new Ai(this,this.ct()),this.Qa){case"Bar":this.Bi=new ei(this,this.ct());break;case"Candlestick":this.Bi=new si(this,this.ct());break;case"Line":this.Bi=new li(this,this.ct());break;case"Area":this.Bi=new ti(this,this.ct());break;case"Histogram":this.Bi=new ai(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.Qa)}},i}(Vi),Ji=function(){function t(t){this.xi=t}return t.prototype.mo=function(t,i,n){var e=t;if(0===this.xi.mode)return e;var r=n.Ci(),s=r.Y();if(null===s)return e;var o=r.X(t,s),h=n.Ah().filter((function(t){return t instanceof Ri})).reduce((function(t,e){if(n.Au(e)||!e.H())return t;var r=e.Z(),s=e.qi();if(r.Qt()||!s.As(i))return t;var o=s.ya(i);if(null===o)return t;var h=g(e.Y());return t.concat([r.X(o.J[3],h.J)])}),[]);if(0===h.length)return e;h.sort((function(t,i){return Math.abs(t-o)-Math.abs(i-o)}));var u=h[0];return r.Di(u,s)},t}(),Yi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){var r=this;if(null!==this.tt){var s=Math.max(1,Math.floor(i));t.lineWidth=s;var o=Math.ceil(this.tt.st*i),h=Math.ceil(this.tt.ht*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=d(r.tt);if(n.po){t.strokeStyle=n.yo,u(t,n.ko),t.beginPath();for(var e=0,a=n.xo;e<a.length;e++){var l=a[e],c=Math.round(l.Dn*i);t.moveTo(c,-s),t.lineTo(c,o+s)}t.stroke()}if(n.No){t.strokeStyle=n.So,u(t,n.Co),t.beginPath();for(var f=0,p=n.Do;f<p.length;f++){var v=p[f],y=Math.round(v.Dn*i);t.moveTo(-s,y),t.lineTo(h+s,y)}t.stroke()}}))}},t}(),ji=function(){function t(t){this.ot=new Yi,this.B=!0,this._i=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){if(this.B){var n=this._i.ct().I().grid,e={st:t,ht:i,No:n.horzLines.visible,po:n.vertLines.visible,So:n.horzLines.color,yo:n.vertLines.color,Co:n.horzLines.style,ko:n.vertLines.style,Do:this._i.Ci().Ln(),xo:this._i.ct().U().Ln()||[]};this.ot._(e),this.B=!1}return this.ot},t}(),Ui=function(){function t(t){this.Bi=new ji(t)}return t.prototype.To=function(){return this.Bi},t}(),Hi=function(){function t(t,i){this.qn=[],this.Bo=new Map,this.An=0,this.Ys=0,this.Eo=1e3,this.Hn=null,this.Lo=new it,this.Ao=t,this.hi=i,this.Vo=new Ui(this);var n=i.I();this.Oo=this.zo("left",n.leftPriceScale),this.Po=this.zo("right",n.rightPriceScale),this.Oo.Mh().Zi(this.Fo.bind(this,this.Oo),this),this.Po.Mh().Zi(this.Fo.bind(this,this.Oo),this),this.Io(n)}return t.prototype.Io=function(t){if(t.leftPriceScale&&this.Oo.hh(t.leftPriceScale),t.rightPriceScale&&this.Po.hh(t.rightPriceScale),t.localization&&(this.Oo.sh(),this.Po.sh()),t.overlayPriceScales)for(var i=0,n=Array.from(this.Bo.values());i<n.length;i++){var e=d(n[i][0].Z());e.hh(t.overlayPriceScales),t.localization&&e.sh()}},t.prototype.Wo=function(t){switch(t){case"left":return this.Oo;case"right":return this.Po}return this.Bo.has(t)?y(this.Bo.get(t))[0].Z():null},t.prototype.rn=function(){this.ct().Ro().nn(this),this.Oo.Mh().nn(this),this.Po.Mh().nn(this),this.qn.forEach((function(t){t.rn&&t.rn()})),this.Lo.hn()},t.prototype.jo=function(){return this.Eo},t.prototype.Uo=function(t){this.Eo=t},t.prototype.ct=function(){return this.hi},t.prototype.dt=function(){return this.Ys},t.prototype.wt=function(){return this.An},t.prototype.Cr=function(t){this.Ys=t,this.qo()},t.prototype.bh=function(t){var i=this;this.An=t,this.Oo.bh(t),this.Po.bh(t),this.qn.forEach((function(n){if(i.Au(n)){var e=n.Z();null!==e&&e.bh(t)}})),this.qo()},t.prototype.Ah=function(){return this.qn},t.prototype.Au=function(t){var i=t.Z();return null===i||this.Oo!==i&&this.Po!==i},t.prototype.Oh=function(t,i,n){var e=void 0!==n?n:this.Yo().Ho+1;this.Ko(t,i,e)},t.prototype.Ph=function(t){var i=this.qn.indexOf(t);v(-1!==i,"removeDataSource: invalid data source"),this.qn.splice(i,1);var n=d(t.Z()).nh();if(this.Bo.has(n)){var e=y(this.Bo.get(n)),r=e.indexOf(t);-1!==r&&(e.splice(r,1),0===e.length&&this.Bo.delete(n))}var s=t.Z();s&&s.Ah().indexOf(t)>=0&&s.Ph(t),null!==s&&(s.zh(),this.$o(s)),this.Hn=null},t.prototype.Vu=function(t){return t===this.Oo?"left":t===this.Po?"right":"overlay"},t.prototype.Xo=function(){return this.Oo},t.prototype.Zo=function(){return this.Po},t.prototype.Jo=function(t,i){t.Wh(i)},t.prototype.Go=function(t,i){t.Rh(i),this.qo()},t.prototype.Qo=function(t){t.jh()},t.prototype.tl=function(t,i){t.Uh(i)},t.prototype.il=function(t,i){t.qh(i),this.qo()},t.prototype.nl=function(t){t.Hh()},t.prototype.qo=function(){this.qn.forEach((function(t){t.Wi()}))},t.prototype.Ci=function(){var t=null;return this.hi.I().rightPriceScale.visible&&0!==this.Po.Ah().length?t=this.Po:this.hi.I().leftPriceScale.visible&&0!==this.Oo.Ah().length?t=this.Oo:0!==this.qn.length&&(t=this.qn[0].Z()),null===t&&(t=this.Po),t},t.prototype.$o=function(t){null!==t&&t.ah()&&this.hl(t)},t.prototype.sl=function(t){var i=this.Ao.Mr();t.rh({fh:!0}),null!==i&&t.Gh(i),this.qo()},t.prototype.rl=function(){this.hl(this.Oo),this.hl(this.Po)},t.prototype.el=function(){var t=this;this.$o(this.Oo),this.$o(this.Po),this.qn.forEach((function(i){t.Au(i)&&t.$o(i.Z())})),this.qo(),this.hi.zr()},t.prototype.Vh=function(){return null===this.Hn&&(this.Hn=mt(this.qn)),this.Hn},t.prototype.ul=function(){return this.Lo},t.prototype.al=function(){return this.Vo},t.prototype.hl=function(t){var i=t.Jh();if(i&&i.length>0&&!this.Ao.Qt()){var n=this.Ao.Mr();null!==n&&t.Gh(n)}t.Wi()},t.prototype.Yo=function(){var t=this.Vh();if(0===t.length)return{ol:0,Ho:0};for(var i=0,n=0,e=0;e<t.length;e++){var r=t[e].ai();null!==r&&(r<i&&(i=r),r>n&&(n=r))}return{ol:i,Ho:n}},t.prototype.Ko=function(t,i,n){var e=this.Wo(i);if(null===e&&(e=this.zo(i,this.hi.I().overlayPriceScales)),this.qn.push(t),!Jt(i)){var r=this.Bo.get(i)||[];r.push(t),this.Bo.set(i,r)}e.Oh(t),t.li(e),t.oi(n),this.$o(e),this.Hn=null},t.prototype.Fo=function(t,i,n){i.eh!==n.eh&&this.hl(t)},t.prototype.zo=function(t,i){var n=f({visible:!0,autoScale:!0},x(i)),e=new _t(t,n,this.hi.I().layout,this.hi.I().localization);return e.bh(this.wt()),e},t}(),Wi=function(t){function i(i){var n=t.call(this)||this;return n.ll=new Map,n.tt=i,n}return c(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.H){t.save();for(var i=0,n=0,e=this.tt.fl;n<e.length;n++)if(0!==(u=e[n]).At.length){t.font=u.xt;var r=this.cl(t,u.At);r>this.tt.dt?u.jr=this.tt.dt/r:u.jr=1,i+=u.vl*u.jr}var s=0;switch(this.tt._l){case"top":s=0;break;case"center":s=Math.max((this.tt.wt-i)/2,0);break;case"bottom":s=Math.max(this.tt.wt-i,0)}t.fillStyle=this.tt.et;for(var o=0,h=this.tt.fl;o<h.length;o++){var u=h[o];t.save();var a=0;switch(this.tt.dl){case"left":t.textAlign="left",a=u.vl/2;break;case"center":t.textAlign="center",a=this.tt.dt/2;break;case"right":t.textAlign="right",a=this.tt.dt-1-u.vl/2}t.translate(a,s),t.textBaseline="top",t.font=u.xt,t.scale(u.jr,u.jr),t.fillText(u.At,0,u.wl),t.restore(),s+=u.vl*u.jr}t.restore()}},i.prototype.cl=function(t,i){var n=this.Ml(t.font),e=n.get(i);return void 0===e&&(e=t.measureText(i).width,n.set(i,e)),e},i.prototype.Ml=function(t){var i=this.ll.get(t);return void 0===i&&(i=new Map,this.ll.set(t,i)),i},i}(k),Qi=function(){function t(t){this.B=!0,this.at={H:!1,et:"",wt:0,dt:0,fl:[],_l:"center",dl:"center"},this.ot=new Wi(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.R(t,i),this.B=!1),this.ot},t.prototype.R=function(t,i){var n=this.lt.I(),e=this.at;e.H=n.visible,e.H&&(e.et=n.color,e.dt=i,e.wt=t,e.dl=n.horzAlign,e._l=n.vertAlign,e.fl=[{At:n.text,xt:Nt(n.fontSize,n.fontFamily,n.fontStyle),vl:1.2*n.fontSize,wl:0,jr:0}])},t}(),qi=function(t){function i(i,n){var e=t.call(this)||this;return e.xi=n,e.Bi=new Qi(e),e}return c(i,t),i.prototype.ci=function(){return[this.Bi]},i.prototype.I=function(){return this.xi},i.prototype.Wi=function(){this.Bi.V()},i}($),Zi=function(){function t(t,i){this.bl=[],this.ml=[],this.Ys=0,this.gl=null,this.pl=null,this.yl=new it,this.kl=new it,this.xl=t,this.xi=i,this.Nl=new Rt(this),this.Ao=new Vt(this,i.timeScale,this.xi.localization),this.A=new X(this,i.crosshair),this.Sl=new Ji(i.crosshair),this.Cl=new qi(this,i.watermark),this.Dl(),this.bl[0].Uo(2e3)}return t.prototype.Tl=function(){this.Bl(new Yt(3))},t.prototype.zr=function(){this.Bl(new Yt(2))},t.prototype.so=function(t){var i=this.El(t);this.Bl(i)},t.prototype.Ll=function(){return this.pl},t.prototype.Al=function(t){var i=this.pl;this.pl=t,null!==i&&this.so(i.Vl),null!==t&&this.so(t.Vl)},t.prototype.I=function(){return this.xi},t.prototype.hh=function(t){m(this.xi,t),this.bl.forEach((function(i){return i.Io(t)})),void 0!==t.timeScale&&this.Ao.hh(t.timeScale),void 0!==t.localization&&this.Ao.ar(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.yl.hn(),this.Tl()},t.prototype.Ol=function(t,i){var n=this.zl(t);null!==n&&(n.Z.hh(i),this.yl.hn())},t.prototype.zl=function(t){for(var i=0,n=this.bl;i<n.length;i++){var e=n[i],r=e.Wo(t);if(null!==r)return{ft:e,Z:r}}return null},t.prototype.U=function(){return this.Ao},t.prototype.Pl=function(){return this.bl},t.prototype.Fl=function(){return this.Cl},t.prototype.Il=function(){return this.A},t.prototype.Wl=function(){return this.kl},t.prototype.Rl=function(t,i){t.bh(i),this.Or()},t.prototype.Cr=function(t){this.Ys=t,this.Ao.Cr(this.Ys),this.bl.forEach((function(i){return i.Cr(t)})),this.Or()},t.prototype.Dl=function(t){var i=new Hi(this.Ao,this);void 0!==t?this.bl.splice(t,0,i):this.bl.push(i);var n=void 0===t?this.bl.length-1:t,e=new Yt(3);return e.we(n,{Me:0,fh:!0}),this.Bl(e),i},t.prototype.Jo=function(t,i,n){t.Jo(i,n)},t.prototype.Go=function(t,i,n){t.Go(i,n),this.ro(),this.Bl(this.jl(t,2))},t.prototype.Qo=function(t,i){t.Qo(i),this.Bl(this.jl(t,2))},t.prototype.tl=function(t,i,n){i.ah()||t.tl(i,n)},t.prototype.il=function(t,i,n){i.ah()||(t.il(i,n),this.ro(),this.Bl(this.jl(t,2)))},t.prototype.nl=function(t,i){i.ah()||(t.nl(i),this.Bl(this.jl(t,2)))},t.prototype.sl=function(t,i){t.sl(i),this.Bl(this.jl(t,2))},t.prototype.Ul=function(t){this.Ao.Wh(t)},t.prototype.ql=function(t,i){var n=this.U();if(!n.Qt()&&0!==i){var e=n.dt();t=Math.max(1,Math.min(t,e)),n.jr(t,i),this.Or()}},t.prototype.Hl=function(t){this.Yl(0),this.Kl(t),this.$l()},t.prototype.Xl=function(t){this.Ao.Rh(t),this.Or()},t.prototype.Zl=function(){this.Ao.jh(),this.zr()},t.prototype.Yl=function(t){this.gl=t,this.Ao.Uh(t)},t.prototype.Kl=function(t){var i=!1;return null!==this.gl&&Math.abs(t-this.gl)>20&&(this.gl=null,i=!0),this.Ao.qh(t),this.Or(),i},t.prototype.$l=function(){this.Ao.Hh(),this.zr(),this.gl=null},t.prototype.O=function(){return this.ml},t.prototype.Jl=function(t,i,n){this.A.Ei(t,i);var e=NaN,r=this.Ao.Ar(t),s=this.Ao.Mr();null!==s&&(r=Math.min(Math.max(s.hs(),r),s.ss()));var o=n.Ci(),h=o.Y();null!==h&&(e=o.Di(i,h)),e=this.Sl.mo(e,r,n),this.A.Oi(r,e,n),this.Gl(),this.kl.hn(this.A.j(),{x:t,y:i})},t.prototype.Ql=function(){this.Il().Pi(),this.Gl(),this.kl.hn(null,null)},t.prototype.ro=function(){var t=this.A.ft();if(null!==t){var i=this.A.Ai(),n=this.A.Vi();this.Jl(i,n,t)}this.A.Wi()},t.prototype.tf=function(t,i){var n=this.Ao.si(0);void 0!==i&&this.Ao.V(i);var e=this.Ao.si(0),r=this.Ao.Er(),s=this.Ao.Mr();if(null!==s&&null!==n&&null!==e){var o=s.As(r),h=n.Cs>e.Cs,u=null!==t&&t>r&&!h,a=o&&this.Ao.I().shiftVisibleRangeOnNewBar;if(u&&!a&&null!==t){var l=t-r;this.Ao.dr(this.Ao.Fr()-l)}}this.Ao.Rr(t)},t.prototype.oo=function(t){null!==t&&t.el()},t.prototype.Lu=function(t){var i=this.bl.find((function(i){return i.Vh().includes(t)}));return void 0===i?null:i},t.prototype.Or=function(){this.Cl.Wi(),this.bl.forEach((function(t){return t.el()})),this.ro()},t.prototype.rn=function(){this.bl.forEach((function(t){return t.rn()})),this.bl.length=0,this.xi.localization.priceFormatter=void 0,this.xi.localization.timeFormatter=void 0},t.prototype.if=function(){return this.Nl},t.prototype.Ou=function(){return this.Nl.I()},t.prototype.Ro=function(){return this.yl},t.prototype.nf=function(t,i){var n=this.bl[0],e=this.hf(i,t,n);return this.ml.push(e),1===this.ml.length?this.Tl():this.zr(),e},t.prototype.sf=function(t){var i=this.Lu(t),n=this.ml.indexOf(t);v(-1!==n,"Series not found"),this.ml.splice(n,1),d(i).Ph(t),t.rn&&t.rn()},t.prototype.ho=function(t,i){var n=d(this.Lu(t));n.Ph(t);var e=this.zl(i);if(null===e){var r=t.ai();n.Oh(t,i,r)}else r=e.ft===n?t.ai():void 0,e.ft.Oh(t,i,r)},t.prototype.Jr=function(){var t=new Yt(2);t.ge(),this.Bl(t)},t.prototype.rf=function(t){var i=new Yt(2);i.ye(t),this.Bl(i)},t.prototype.ke=function(){var t=new Yt(2);t.ke(),this.Bl(t)},t.prototype._r=function(t){var i=new Yt(2);i._r(t),this.Bl(i)},t.prototype.dr=function(t){var i=new Yt(2);i.dr(t),this.Bl(i)},t.prototype.ef=function(){return this.xi.rightPriceScale.visible?"right":"left"},t.prototype.jl=function(t,i){var n=new Yt(i);if(null!==t){var e=this.bl.indexOf(t);n.we(e,{Me:i})}return n},t.prototype.El=function(t,i){return void 0===i&&(i=2),this.jl(this.Lu(t),i)},t.prototype.Bl=function(t){this.xl&&this.xl(t),this.bl.forEach((function(t){return t.al().To().V()}))},t.prototype.Gl=function(){this.Bl(new Yt(1))},t.prototype.hf=function(t,i,n){var e=new Ri(this,t,i),r=void 0!==t.priceScaleId?t.priceScaleId:this.ef();return n.Oh(e,r),Jt(r)||e.hh(t),e},t}(),$i=function(){function t(t,i){this.ht=t,this.st=i}return t.prototype.an=function(t){return this.ht===t.ht&&this.st===t.st},t}();function Xi(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Gi(t){var i=d(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Ki(t,i){var n=t.createElement("canvas"),e=Xi(n);return n.style.width=i.ht+"px",n.style.height=i.st+"px",n.width=i.ht*e,n.height=i.st*e,n}function tn(t,i){var n=d(t.ownerDocument).createElement("canvas");t.appendChild(n);var r,s=(void 0===r&&(r=e),new h(n,r));return s.resizeCanvas({width:i.ht,height:i.st}),s}var nn="undefined"!=typeof window,en=function(){if(!nn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!nn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}(),rn=function(){if(!nn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),sn=function(){function t(t,i,n){this.uf=0,this.af=null,this.lf=null,this.ff=!1,this.cf=null,this.vf=!1,this._f=!1,this.df=null,this.wf=null,this.Mf=null,this.bf=null,this.mf=0,this.gf=!1,this.pf=!1,this.yf=!1,this.kf=t,this.xf=i,this.xi=n,this.Nf()}return t.prototype.rn=function(){null!==this.df&&(this.df(),this.df=null),null!==this.wf&&(this.wf(),this.wf=null),null!==this.Mf&&(this.Mf(),this.Mf=null),this.Sf(),this.Cf()},t.prototype.Df=function(t){var i=this;this.wf&&this.wf();var n=this.Tf.bind(this);this.wf=function(){i.kf.removeEventListener("mousemove",n)},this.kf.addEventListener("mousemove",n),un(t)&&this.Tf(t);var e=this.Bf(t);this.Ef(e,this.xf.Lf)},t.prototype.Cf=function(){null!==this.af&&clearTimeout(this.af),this.uf=0,this.af=null},t.prototype.Tf=function(t){if(!this.yf||un(t)){var i=this.Bf(t);this.Ef(i,this.xf.Af)}},t.prototype.Vf=function(t){if((!("button"in t)||0===t.button)&&null===this.bf){var i=un(t);if(!this.pf||!i){this.gf=!0;var n=this.Bf(t),e=g(this.cf),r=Math.abs(e.g-n.Of),s=Math.abs(e.p-n.zf),o=r+s>5;if(o||!i){if(o&&!this.vf&&i){var h=.5*r,u=s>=h&&!this.xi.Pf,a=h>s&&!this.xi.Ff;u||a||(this.pf=!0)}o&&(this.vf=!0,this._f=!0,i&&this.Sf()),this.pf||(this.Ef(n,this.xf.If),i&&an(t))}}}},t.prototype.Wf=function(t){if(!("button"in t)||0===t.button){var i=this.Bf(t);this.Sf(),this.cf=null,this.yf=!1,this.Mf&&(this.Mf(),this.Mf=null),un(t)&&this.Rf(t),this.Ef(i,this.xf.jf),++this.uf,this.af&&this.uf>1?(this.Ef(i,this.xf.Uf),this.Cf()):this._f||this.Ef(i,this.xf.qf),un(t)&&(an(t),this.Rf(t),0===t.touches.length&&(this.ff=!1))}},t.prototype.Sf=function(){null!==this.lf&&(clearTimeout(this.lf),this.lf=null)},t.prototype.Hf=function(t){if(!("button"in t)||0===t.button){var i=this.Bf(t);this._f=!1,this.vf=!1,this.pf=!1,un(t)&&this.Df(t),this.cf={g:i.Of,p:i.zf},this.Mf&&(this.Mf(),this.Mf=null);var n=this.Vf.bind(this),e=this.Wf.bind(this),r=this.kf.ownerDocument.documentElement;this.Mf=function(){r.removeEventListener("touchmove",n),r.removeEventListener("touchend",e),r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",e)},r.addEventListener("touchmove",n,{passive:!1}),r.addEventListener("touchend",e,{passive:!1}),this.Sf(),un(t)&&1===t.touches.length?this.lf=setTimeout(this.Yf.bind(this,t),240):(r.addEventListener("mousemove",n),r.addEventListener("mouseup",e)),this.yf=!0,this.Ef(i,this.xf.Kf),this.af||(this.uf=0,this.af=setTimeout(this.Cf.bind(this),500))}},t.prototype.Nf=function(){var t=this;this.kf.addEventListener("mouseenter",this.Df.bind(this)),this.kf.addEventListener("touchcancel",this.Sf.bind(this));var i=this.kf.ownerDocument,n=function(i){t.xf.$f&&(i.composed&&t.kf.contains(i.composedPath()[0])||i.target&&t.kf.contains(i.target)||t.xf.$f())};this.df=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.kf.addEventListener("mouseleave",this.Rf.bind(this)),this.kf.addEventListener("touchstart",this.Hf.bind(this),{passive:!0}),en||this.kf.addEventListener("mousedown",this.Hf.bind(this)),this.Xf(),this.kf.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Xf=function(){var t=this;void 0===this.xf.Zf&&void 0===this.xf.Jf&&void 0===this.xf.Gf||(this.kf.addEventListener("touchstart",(function(i){return t.Qf(i.touches)}),{passive:!0}),this.kf.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.bf&&void 0!==t.xf.Jf){var n=hn(i.touches[0],i.touches[1])/t.mf;t.xf.Jf(t.bf,n),an(i)}}),{passive:!1}),this.kf.addEventListener("touchend",(function(i){t.Qf(i.touches)})))},t.prototype.Qf=function(t){1===t.length&&(this.gf=!1),2!==t.length||this.gf||this.ff?this.tc():this.ic(t)},t.prototype.ic=function(t){var i=on(this.kf);this.bf={g:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.mf=hn(t[0],t[1]),void 0!==this.xf.Zf&&this.xf.Zf(),this.Sf()},t.prototype.tc=function(){null!==this.bf&&(this.bf=null,void 0!==this.xf.Gf&&this.xf.Gf())},t.prototype.Rf=function(t){this.wf&&this.wf();var i=this.Bf(t);this.Ef(i,this.xf.nc)},t.prototype.Yf=function(t){var i=this.Bf(t);this.Ef(i,this.xf.hc),this._f=!0,this.ff=!0},t.prototype.Ef=function(t,i){i&&i.call(this.xf,t)},t.prototype.Bf=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=on(this.kf);return{sc:i.clientX,rc:i.clientY,Of:i.pageX,zf:i.pageY,ec:i.screenX,uc:i.screenY,ac:i.clientX-n.left,oc:i.clientY-n.top,lc:t.ctrlKey,fc:t.altKey,cc:t.shiftKey,vc:t.metaKey,pe:t.type.startsWith("mouse")?"mouse":"touch",_c:t.view}},t}();function on(t){return t.getBoundingClientRect()||{left:0,top:0}}function hn(t,i){var n=t.clientX-i.clientX,e=t.clientY-i.clientY;return Math.sqrt(n*n+e*e)}function un(t){return Boolean(t.touches)}function an(t){t.cancelable&&t.preventDefault()}var ln=function(){function t(t,i,n,e){this.Du=new fi(200),this.oe=0,this.dc="",this.Iu="",this.xu=[],this.wc=new Map,this.oe=t,this.dc=i,this.Iu=Nt(t,n,e)}return t.prototype.rn=function(){this.Du.Nu(),this.xu=[],this.wc.clear()},t.prototype.Mc=function(t,i,n,e,r){var s=this.bc(t,i);if("left"!==r){var o=Xi(t.canvas);n-=Math.floor(s.mc*o)}e-=Math.floor(s.wt/2),t.drawImage(s.gc,n,e,s.dt,s.wt)},t.prototype.bc=function(t,i){var n,e=this;if(this.wc.has(i))n=y(this.wc.get(i));else{if(this.xu.length>=200){var r=y(this.xu.shift());this.wc.delete(r)}var s=Xi(t.canvas),o=Math.ceil(this.oe/4.5),h=Math.round(this.oe/10),u=Math.ceil(this.Du.Vt(t,i)),a=ot(Math.round(u+2*o)),l=ot(this.oe+2*o),c=Ki(document,new $i(a,l));n={At:i,mc:Math.round(Math.max(1,u)),dt:Math.ceil(a*s),wt:Math.ceil(l*s),gc:c},0!==u&&(this.xu.push(n.At),this.wc.set(n.At,n)),J(t=Gi(n.gc),s,(function(){t.font=e.Iu,t.fillStyle=e.dc,t.fillText(i,0,l-o-h)}))}return n},t}(),cn=function(){function t(t,i,n,e){var r=this;this.Jt=null,this.yc=null,this.kc=null,this.xc=!1,this.Nc=new fi(50),this.Sc=new ln(11,"#000"),this.dc=null,this.Iu=null,this.Cc=0,this.Dc=function(){r.Tc(r.Nl.I()),r._i.Bc().ct().zr()},this.Ec=function(){r._i.Bc().ct().zr()},this._i=t,this.xi=i,this.Nl=n,this.Lc="left"===e,this.Ac=document.createElement("div"),this.Ac.style.height="100%",this.Ac.style.overflow="hidden",this.Ac.style.width="25px",this.Ac.style.left="0",this.Ac.style.position="relative",this.Vc=tn(this.Ac,new $i(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var s=this.Vc.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Oc=tn(this.Ac,new $i(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var o=this.Oc.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";var h={Kf:this.zc.bind(this),If:this.Pc.bind(this),$f:this.Fc.bind(this),jf:this.Ic.bind(this),Uf:this.Wc.bind(this),Lf:this.Rc.bind(this),nc:this.jc.bind(this)};this.Uc=new sn(this.Oc.canvas,h,{Pf:!1,Ff:!0})}return t.prototype.rn=function(){this.Uc.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy(),null!==this.Jt&&this.Jt.Ih().nn(this),this.Jt=null,null!==this.kc&&(clearTimeout(this.kc),this.kc=null),this.Sc.rn()},t.prototype.qc=function(){return this.Ac},t.prototype.K=function(){return this.xi.backgroundColor},t.prototype.S=function(){return d(this.Jt).I().borderColor},t.prototype.Hc=function(){return this.xi.textColor},t.prototype.zt=function(){return this.xi.fontSize},t.prototype.Yc=function(){return Nt(this.zt(),this.xi.fontFamily)},t.prototype.Kc=function(){var t=this.Nl.I(),i=this.dc!==t.et,n=this.Iu!==t.xt;return(i||n)&&(this.Tc(t),this.dc=t.et),n&&(this.Nc.Nu(),this.Iu=t.xt),t},t.prototype.$c=function(){if(null===this.Jt)return 0;var t=34,i=this.Kc(),n=Gi(this.Vc.canvas),e=this.Jt.Ln();n.font=this.Yc(),e.length>0&&(t=Math.max(this.Nc.Vt(n,e[0].Tn),this.Nc.Vt(n,e[e.length-1].Tn)));for(var r=this.Xc(),s=r.length;s--;){var o=this.Nc.Vt(n,r[s].At());o>t&&(t=o)}var h=Math.ceil(i.Dt+i.Ct+i.Et+i.Lt+t);return h+h%2},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.yc&&this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.height=t.st+"px",this.Ac.style.minWidth=t.ht+"px")},t.prototype.Jc=function(){return d(this.yc).ht},t.prototype.li=function(t){this.Jt!==t&&(null!==this.Jt&&this.Jt.Ih().nn(this),this.Jt=t,t.Ih().Zi(this.jn.bind(this),this))},t.prototype.Z=function(){return this.Jt},t.prototype.Nu=function(){var t=this._i.Gc();this._i.Bc().ct().sl(t,d(this.Z()))},t.prototype.Qc=function(t){if(null!==this.yc){if(1!==t){var i=Gi(this.Vc.canvas);this.tv(),this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio),this.nv(i,this.Vc.pixelRatio),this.hv(i,this.Vc.pixelRatio)}var n=Gi(this.Oc.canvas),e=this.yc.ht,r=this.yc.st;J(n,this.Oc.pixelRatio,(function(){n.clearRect(0,0,e,r)})),this.sv(n,this.Oc.pixelRatio)}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.zc=function(t){if(null!==this.Jt&&!this.Jt.Qt()&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc();this.xc=!0,i.Jo(n,this.Jt,t.oc)}},t.prototype.Pc=function(t){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc(),e=this.Jt;i.Go(n,e,t.oc)}},t.prototype.Fc=function(){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var t=this._i.Bc().ct(),i=this._i.Gc(),n=this.Jt;this.xc&&(this.xc=!1,t.Qo(i,n))}},t.prototype.Ic=function(t){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc();this.xc=!1,i.Qo(n,this.Jt)}},t.prototype.Wc=function(t){this._i.Bc().I().handleScale.axisDoubleClickReset&&this.Nu()},t.prototype.Rc=function(t){null!==this.Jt&&(!this._i.Bc().ct().I().handleScale.axisPressedMouseMove.price||this.Jt.oh()||this.Jt.lh()||this.ev(1))},t.prototype.jc=function(t){this.ev(0)},t.prototype.Xc=function(){var t=this,i=[],n=null===this.Jt?void 0:this.Jt;return function(e){for(var r=0;r<e.length;++r)for(var s=e[r].fi(t._i.Gc(),n),o=0;o<s.length;o++)i.push(s[o])}(this._i.Gc().Vh()),i},t.prototype.iv=function(t,i){var n=this;if(null!==this.yc){var e=this.yc.ht,r=this.yc.st;J(t,i,(function(){Y(t,0,0,e,r,n.K())}))}},t.prototype.fu=function(t,i){if(null!==this.yc&&null!==this.Jt&&this.Jt.I().borderVisible){t.save(),t.fillStyle=this.S();var n,e=Math.max(1,Math.floor(this.Kc().Dt*i));n=this.Lc?Math.floor(this.yc.ht*i)-e:0,t.fillRect(n,0,e,Math.ceil(this.yc.st*i)),t.restore()}},t.prototype.nv=function(t,i){if(null!==this.yc&&null!==this.Jt){var n=this.Jt.Ln();t.save(),t.strokeStyle=this.S(),t.font=this.Yc(),t.fillStyle=this.S();var e=this.Kc(),r=this.Jt.I().borderVisible&&this.Jt.I().drawTicks,s=this.Lc?Math.floor((this.yc.ht-e.Ct)*i-e.Dt*i):Math.floor(e.Dt*i),o=this.Lc?Math.round(s-e.Et*i):Math.round(s+e.Ct*i+e.Et*i),h=this.Lc?"right":"left",u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);if(r){var l=Math.round(e.Ct*i);t.beginPath();for(var c=0,f=n;c<f.length;c++){var p=f[c];t.rect(s,Math.round(p.Dn*i)-a,l,u)}t.fill()}t.fillStyle=this.Hc();for(var v=0,y=n;v<y.length;v++)p=y[v],this.Sc.Mc(t,p.Tn,o,Math.round(p.Dn*i),h);t.restore()}},t.prototype.tv=function(){if(null!==this.yc&&null!==this.Jt){var t=this.yc.st/2,i=[],n=this.Jt.Vh().slice(),e=this._i.Gc(),r=this.Kc();this.Jt===e.Ci()&&this._i.Gc().Vh().forEach((function(t){e.Au(t)&&n.push(t)}));var s=this.Jt.Ah()[0],o=this.Jt;n.forEach((function(n){var r=n.fi(e,o);r.forEach((function(t){t.Yt(null),t.Kt()&&i.push(t)})),s===n&&r.length>0&&(t=r[0].Pt())}));var h=i.filter((function(i){return i.Pt()<=t})),u=i.filter((function(i){return i.Pt()>t}));if(h.sort((function(t,i){return i.Pt()-t.Pt()})),h.length&&u.length&&u.push(h[0]),u.sort((function(t,i){return t.Pt()-i.Pt()})),i.forEach((function(t){return t.Yt(t.Pt())})),this.Jt.I().alignLabels){for(var a=1;a<h.length;a++){var l=h[a],c=(p=h[a-1]).wt(r,!1);l.Pt()>(v=p.Ht())-c&&l.Yt(v-c)}for(var f=1;f<u.length;f++){var p,v;l=u[f],c=(p=u[f-1]).wt(r,!0),l.Pt()<(v=p.Ht())+c&&l.Yt(v+c)}}}},t.prototype.hv=function(t,i){var n=this;if(null!==this.yc){t.save();var e=this.yc,r=this.Xc(),s=this.Kc(),o=this.Lc?"right":"left";r.forEach((function(r){if(r.$t()){var h=r.W(d(n.Jt));t.save(),h.h(t,s,n.Nc,e.ht,o,i),t.restore()}})),t.restore()}},t.prototype.sv=function(t,i){var n=this;if(null!==this.yc&&null!==this.Jt){t.save();var e=this.yc,r=this._i.Bc().ct(),s=[],o=this._i.Gc(),h=r.Il().fi(o,this.Jt);h.length&&s.push(h);var u=this.Kc(),a=this.Lc?"right":"left";s.forEach((function(r){r.forEach((function(r){t.save(),r.W(d(n.Jt)).h(t,u,n.Nc,e.ht,a,i),t.restore()}))})),t.restore()}},t.prototype.ev=function(t){this.Ac.style.cursor=1===t?"ns-resize":"default"},t.prototype.jn=function(){var t=this,i=this.$c();if(this.Cc<i){var n=this._i.Bc();null===this.kc&&(this.kc=setTimeout((function(){n&&n.ct().Tl(),t.kc=null}),100))}this.Cc=i},t.prototype.Tc=function(t){this.Sc.rn(),this.Sc=new ln(t.zt,t.et,t.ae)},t}(),fn=rn,pn=function(){function t(t,i){var n=this;this.yc=new $i(0,0),this.uv=null,this.av=null,this.ov=null,this.lv=!1,this.fv=new it,this.cv=0,this.vv=!1,this._v=null,this.dv=!1,this.wv=null,this.Dc=function(){return n.Mv&&n.hi().zr()},this.Ec=function(){return n.Mv&&n.hi().zr()},this.bv=t,this.Mv=i,this.Mv.ul().Zi(this.mv.bind(this),this,!0),this.gv=document.createElement("td"),this.gv.style.padding="0",this.gv.style.position="relative";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.pv=document.createElement("td"),this.pv.style.padding="0",this.yv=document.createElement("td"),this.yv.style.padding="0",this.gv.appendChild(e),this.Vc=tn(e,new $i(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var r=this.Vc.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Oc=tn(e,new $i(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var s=this.Oc.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kv=document.createElement("tr"),this.kv.appendChild(this.pv),this.kv.appendChild(this.gv),this.kv.appendChild(this.yv),this.xv();var o=this.Bc().I().handleScroll;this.Uc=new sn(this.Oc.canvas,this,{Pf:!o.vertTouchDrag,Ff:!o.horzTouchDrag})}return t.prototype.rn=function(){null!==this.uv&&this.uv.rn(),null!==this.av&&this.av.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy(),null!==this.Mv&&this.Mv.ul().nn(this),this.Uc.rn()},t.prototype.Gc=function(){return d(this.Mv)},t.prototype.Nv=function(i){null!==this.Mv&&this.Mv.ul().nn(this),this.Mv=i,null!==this.Mv&&this.Mv.ul().Zi(t.prototype.mv.bind(this),this,!0),this.xv()},t.prototype.Bc=function(){return this.bv},t.prototype.qc=function(){return this.kv},t.prototype.xv=function(){if(null!==this.Mv&&(this.Sv(),0!==this.hi().O().length)){if(null!==this.uv){var t=this.Mv.Xo();this.uv.li(d(t))}if(null!==this.av){var i=this.Mv.Zo();this.av.li(d(i))}}},t.prototype.jo=function(){return null!==this.Mv?this.Mv.jo():0},t.prototype.Uo=function(t){this.Mv&&this.Mv.Uo(t)},t.prototype.Lf=function(t){if(this.Mv){var i=t.ac,n=t.oc;en||this.Cv(i,n)}},t.prototype.Kf=function(t){if(this.vv=!1,this.dv=null!==this._v,this.Mv){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)d(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.hi();if(!this.Mv.Ci().Qt()&&!n.U().Qt()){if(null!==this._v){var e=n.Il();this.wv={x:e.Mt(),y:e.bt()},this._v={x:t.ac,y:t.oc}}en||this.Cv(t.ac,t.oc)}}},t.prototype.Af=function(t){if(this.Mv){var i=t.ac,n=t.oc;if(this.Dv()&&this.Tv(),!en){this.Cv(i,n);var e=this.Wu(i,n);this.hi().Al(e&&{Vl:e.Vl,Bv:e.Bv}),null!==e&&void 0!==e._c.Ev&&e._c.Ev(i,n)}}},t.prototype.qf=function(t){if(null!==this.Mv){var i=t.ac,n=t.oc,e=this.Wu(i,n);if(null!==e&&void 0!==e._c.Lv&&e._c.Lv(i,n),this.fv.sn()){var r=this.hi().Il().j();this.fv.hn(r,{x:i,y:n})}this.Av()}},t.prototype.If=function(t){if(null!==this.Mv){var i=this.hi(),n=t.ac,e=t.oc;if(null!==this._v){this.dv=!1;var r=d(this.wv),s=r.x+(n-this._v.x),o=r.y+(e-this._v.y);this.Cv(s,o)}else this.Dv()||this.Cv(n,e);if(!i.U().Qt()){var h=this.bv.I().handleScroll;if(h.pressedMouseMove&&"touch"!==t.pe||(h.horzTouchDrag||h.vertTouchDrag)&&"mouse"!==t.pe){var u=this.Mv.Ci();null!==this.ov||this.Vv()||(this.ov={x:t.sc,y:t.rc}),null===this.ov||this.ov.x===t.sc&&this.ov.y===t.rc||this.lv||(u.Qt()||i.tl(this.Mv,u,t.oc),i.Yl(t.ac),this.lv=!0),this.lv&&(u.Qt()||i.il(this.Mv,u,t.oc),i.Kl(t.ac))}}}},t.prototype.jf=function(t){if(null!==this.Mv){this.vv=!1;var i=this.hi();if(this.lv){var n=this.Mv.Ci();i.nl(this.Mv,n),i.$l(),this.ov=null,this.lv=!1}}},t.prototype.hc=function(t){if(this.vv=!0,null===this._v&&fn){var i={x:t.ac,y:t.oc};this.Ov(i,i)}},t.prototype.nc=function(t){null!==this.Mv&&(this.Mv.ct().Al(null),rn||this.Tv())},t.prototype.zv=function(){return this.fv},t.prototype.Zf=function(){this.cv=1},t.prototype.Jf=function(t,i){if(this.bv.I().handleScale.pinch){var n=5*(i-this.cv);this.cv=i,this.hi().ql(t.g,n)}},t.prototype.Wu=function(t,i){var n=this.Mv;if(null===n)return null;for(var e=0,r=n.Vh();e<r.length;e++){var s=r[e],o=this.Pv(s.ci(n),t,i);if(null!==o)return{Vl:s,_c:o._c,Bv:o.Bv}}return null},t.prototype.Fv=function(t,i){d("left"===i?this.uv:this.av).Zc(new $i(t,this.yc.st))},t.prototype.Iv=function(){return this.yc},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.gv.style.width=t.ht+"px",this.gv.style.height=t.st+"px")},t.prototype.Wv=function(){var t=d(this.Mv);t.$o(t.Xo()),t.$o(t.Zo());for(var i=0,n=t.Ah();i<n.length;i++){var e=n[i];if(t.Au(e)){var r=e.Z();null!==r&&t.$o(r),e.Wi()}}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.Qc=function(t){if(0!==t&&null!==this.Mv){if(t>1&&this.Wv(),null!==this.uv&&this.uv.Qc(t),null!==this.av&&this.av.Qc(t),1!==t){var i=Gi(this.Vc.canvas);i.save(),this.iv(i,this.Rv(),this.Vc.pixelRatio),this.Mv&&(this.jv(i,this.Vc.pixelRatio),this.Uv(i,this.Vc.pixelRatio),this.qv(i,this.Vc.pixelRatio)),i.restore()}var n=Gi(this.Oc.canvas);n.clearRect(0,0,Math.ceil(this.yc.ht*this.Oc.pixelRatio),Math.ceil(this.yc.st*this.Oc.pixelRatio)),this.Hv(n,this.Oc.pixelRatio)}},t.prototype.Yv=function(){return this.uv},t.prototype.Kv=function(){return this.av},t.prototype.Rv=function(){return this.bv.I().layout.backgroundColor},t.prototype.mv=function(){null!==this.Mv&&this.Mv.ul().nn(this),this.Mv=null},t.prototype.iv=function(t,i,n){var e=this;J(t,n,(function(){Y(t,0,0,e.yc.ht,e.yc.st,i)}))},t.prototype.jv=function(t,i){var n=d(this.Mv),e=n.al().To().W(n.wt(),n.dt());null!==e&&(t.save(),e.h(t,i,!1),t.restore())},t.prototype.Uv=function(t,i){var n=this.hi().Fl();this.$v(n,t,i),this.Xv(n,t,i)},t.prototype.Hv=function(t,i){this.Xv(this.hi().Il(),t,i)},t.prototype.qv=function(t,i){for(var n=d(this.Mv).Vh(),e=0,r=n;e<r.length;e++){var s=r[e];this.$v(s,t,i)}for(var o=0,h=n;o<h.length;o++)s=h[o],this.Xv(s,t,i)},t.prototype.Xv=function(t,i,n){for(var e=d(this.Mv),r=t.ci(e),s=e.wt(),o=e.dt(),h=e.ct().Ll(),u=null!==h&&h.Vl===t,a=null!==h&&u&&void 0!==h.Bv?h.Bv.Ru:void 0,l=0,c=r;l<c.length;l++){var f=c[l].W(s,o);null!==f&&(i.save(),f.h(i,n,u,a),i.restore())}},t.prototype.$v=function(t,i,n){for(var e=d(this.Mv),r=t.ci(e),s=e.wt(),o=e.dt(),h=e.ct().Ll(),u=null!==h&&h.Vl===t,a=null!==h&&u&&void 0!==h.Bv?h.Bv.Ru:void 0,l=0,c=r;l<c.length;l++){var f=c[l].W(s,o);null!==f&&void 0!==f.o&&(i.save(),f.o(i,n,u,a),i.restore())}},t.prototype.Pv=function(t,i,n){for(var e=0,r=t;e<r.length;e++){var s=r[e],o=s.W(this.yc.st,this.yc.ht);if(null!==o&&o.Wu){var h=o.Wu(i,n);if(null!==h)return{_c:s,Bv:h}}}return null},t.prototype.Sv=function(){if(null!==this.Mv){var t=this.bv;t.I().leftPriceScale.visible||null===this.uv||(this.pv.removeChild(this.uv.qc()),this.uv.rn(),this.uv=null),t.I().rightPriceScale.visible||null===this.av||(this.yv.removeChild(this.av.qc()),this.av.rn(),this.av=null);var i=t.ct().if();t.I().leftPriceScale.visible&&null===this.uv&&(this.uv=new cn(this,t.I().layout,i,"left"),this.pv.appendChild(this.uv.qc())),t.I().rightPriceScale.visible&&null===this.av&&(this.av=new cn(this,t.I().layout,i,"right"),this.yv.appendChild(this.av.qc()))}},t.prototype.Dv=function(){return fn&&null===this._v},t.prototype.Vv=function(){return fn&&this.vv||null!==this._v},t.prototype.Zv=function(t){return Math.max(0,Math.min(t,this.yc.ht-1))},t.prototype.Jv=function(t){return Math.max(0,Math.min(t,this.yc.st-1))},t.prototype.Cv=function(t,i){this.hi().Jl(this.Zv(t),this.Jv(i),d(this.Mv))},t.prototype.Tv=function(){this.hi().Ql()},t.prototype.Av=function(){this.dv&&(this._v=null,this.Tv())},t.prototype.Ov=function(t,i){this._v=t,this.dv=!1,this.Cv(i.x,i.y);var n=this.hi().Il();this.wv={x:n.Mt(),y:n.bt()}},t.prototype.hi=function(){return this.bv.ct()},t}(),vn=function(){function t(t,i,n,e){var r=this;this.B=!0,this.yc=new $i(0,0),this.Dc=function(){return r.Qc(3)},this.Lc="left"===t,this.Nl=n.if,this.xi=i,this.Gv=e,this.Ac=document.createElement("div"),this.Ac.style.width="25px",this.Ac.style.height="100%",this.Ac.style.overflow="hidden",this.Vc=tn(this.Ac,new $i(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc)}return t.prototype.rn=function(){this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy()},t.prototype.qc=function(){return this.Ac},t.prototype.Iv=function(){return this.yc},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.minWidth=t.ht+"px",this.Ac.style.height=t.st+"px",this.B=!0)},t.prototype.Qc=function(t){if((!(t<3)||this.B)&&0!==this.yc.ht&&0!==this.yc.st){this.B=!1;var i=Gi(this.Vc.canvas);this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio)}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.fu=function(t,i){if(this.Gv()){var n=this.yc.ht;t.save(),t.fillStyle=this.xi.timeScale.borderColor;var e=Math.floor(this.Nl.I().Dt*i),r=this.Lc?Math.round(n*i)-e:0;t.fillRect(r,0,e,e),t.restore()}},t.prototype.iv=function(t,i){var n=this;J(t,i,(function(){Y(t,0,0,n.yc.ht,n.yc.st,n.xi.layout.backgroundColor)}))},t}();function yn(t,i){return t.Fs>i.Fs?t:i}var dn=function(){function t(t){var i=this;this.Qv=null,this.t_=null,this.ue=null,this.i_=!1,this.yc=new $i(0,0),this.Dc=function(){return i.bv.ct().zr()},this.Ec=function(){return i.bv.ct().zr()},this.bv=t,this.xi=t.I().layout,this.n_=document.createElement("tr"),this.h_=document.createElement("td"),this.h_.style.padding="0",this.s_=document.createElement("td"),this.s_.style.padding="0",this.Ac=document.createElement("td"),this.Ac.style.height="25px",this.Ac.style.padding="0",this.r_=document.createElement("div"),this.r_.style.width="100%",this.r_.style.height="100%",this.r_.style.position="relative",this.r_.style.overflow="hidden",this.Ac.appendChild(this.r_),this.Vc=tn(this.r_,new $i(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var n=this.Vc.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Oc=tn(this.r_,new $i(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var e=this.Oc.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.n_.appendChild(this.h_),this.n_.appendChild(this.Ac),this.n_.appendChild(this.s_),this.e_(),this.bv.ct().Ro().Zi(this.e_.bind(this),this),this.Uc=new sn(this.Oc.canvas,this,{Pf:!0,Ff:!1})}return t.prototype.rn=function(){this.Uc.rn(),null!==this.Qv&&this.Qv.rn(),null!==this.t_&&this.t_.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy()},t.prototype.qc=function(){return this.n_},t.prototype.u_=function(){return this.Qv},t.prototype.a_=function(){return this.t_},t.prototype.Kf=function(t){if(!this.i_){this.i_=!0;var i=this.bv.ct();!i.U().Qt()&&this.bv.I().handleScale.axisPressedMouseMove.time&&i.Ul(t.ac)}},t.prototype.$f=function(){var t=this.bv.ct();!t.U().Qt()&&this.i_&&(this.i_=!1,this.bv.I().handleScale.axisPressedMouseMove.time&&t.Zl())},t.prototype.If=function(t){var i=this.bv.ct();!i.U().Qt()&&this.bv.I().handleScale.axisPressedMouseMove.time&&i.Xl(t.ac)},t.prototype.jf=function(t){this.i_=!1;var i=this.bv.ct();i.U().Qt()&&!this.bv.I().handleScale.axisPressedMouseMove.time||i.Zl()},t.prototype.Uf=function(){this.bv.I().handleScale.axisDoubleClickReset&&this.bv.ct().ke()},t.prototype.Lf=function(t){this.bv.ct().I().handleScale.axisPressedMouseMove.time&&this.ev(1)},t.prototype.nc=function(t){this.ev(0)},t.prototype.Iv=function(){return this.yc},t.prototype.o_=function(t,i,n){this.yc&&this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.height=t.st+"px"),null!==this.Qv&&this.Qv.Zc(new $i(i,t.st)),null!==this.t_&&this.t_.Zc(new $i(n,t.st))},t.prototype.l_=function(){var t=this.f_();return Math.ceil(t.Dt+t.Ct+t.zt+t.Tt+t.Bt)},t.prototype.V=function(){this.bv.ct().U().Ln()},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.Qc=function(t){if(0!==t){if(1!==t){var i=Gi(this.Vc.canvas);this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio),this.nv(i,this.Vc.pixelRatio),null!==this.Qv&&this.Qv.Qc(t),null!==this.t_&&this.t_.Qc(t)}var n=Gi(this.Oc.canvas),e=this.Oc.pixelRatio;n.clearRect(0,0,Math.ceil(this.yc.ht*e),Math.ceil(this.yc.st*e)),this.c_([this.bv.ct().Il()],n,e)}},t.prototype.iv=function(t,i){var n=this;J(t,i,(function(){Y(t,0,0,n.yc.ht,n.yc.st,n.Rv())}))},t.prototype.fu=function(t,i){if(this.bv.I().timeScale.borderVisible){t.save(),t.fillStyle=this.v_();var n=Math.max(1,Math.floor(this.f_().Dt*i));t.fillRect(0,0,Math.ceil(this.yc.ht*i),n),t.restore()}},t.prototype.nv=function(t,i){var n=this,e=this.bv.ct().U().Ln();if(e&&0!==e.length){var r=e.reduce(yn,e[0]).Fs;r>30&&r<40&&(r=30),t.save(),t.strokeStyle=this.v_();var s=this.f_(),o=s.Dt+s.Ct+s.Tt+s.zt-s.Ot;t.textAlign="center",t.fillStyle=this.v_();var h=Math.floor(this.f_().Dt*i),u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);if(this.bv.ct().U().I().borderVisible){t.beginPath();for(var l=Math.round(s.Ct*i),c=e.length;c--;){var f=Math.round(e[c].Dn*i);t.rect(f-a,h,u,l)}t.fill()}t.fillStyle=this.fe(),J(t,i,(function(){t.font=n.__();for(var i=0,s=e;i<s.length;i++)(a=s[i]).Fs<r&&t.fillText(a.Tn,a.Dn,o);t.font=n.d_();for(var h=0,u=e;h<u.length;h++){var a;(a=u[h]).Fs>=r&&t.fillText(a.Tn,a.Dn,o)}}))}},t.prototype.c_=function(t,i,n){for(var e=this.f_(),r=0,s=t;r<s.length;r++)for(var o=0,h=s[r].vi();o<h.length;o++){var u=h[o];i.save(),u.W().h(i,e,n),i.restore()}},t.prototype.Rv=function(){return this.xi.backgroundColor},t.prototype.v_=function(){return this.bv.I().timeScale.borderColor},t.prototype.fe=function(){return this.xi.textColor},t.prototype.oe=function(){return this.xi.fontSize},t.prototype.__=function(){return Nt(this.oe(),this.xi.fontFamily)},t.prototype.d_=function(){return Nt(this.oe(),this.xi.fontFamily,"bold")},t.prototype.f_=function(){null===this.ue&&(this.ue={Dt:1,Ot:NaN,Tt:NaN,Bt:NaN,ni:NaN,Ct:3,zt:NaN,xt:"",ii:new fi});var t=this.ue,i=this.__();if(t.xt!==i){var n=this.oe();t.zt=n,t.xt=i,t.Tt=Math.ceil(n/2.5),t.Bt=t.Tt,t.ni=Math.ceil(n/2),t.Ot=Math.round(this.oe()/5),t.ii.Nu()}return this.ue},t.prototype.ev=function(t){this.Ac.style.cursor=1===t?"ew-resize":"default"},t.prototype.e_=function(){var t=this.bv.ct(),i=t.I();i.leftPriceScale.visible||null===this.Qv||(this.h_.removeChild(this.Qv.qc()),this.Qv.rn(),this.Qv=null),i.rightPriceScale.visible||null===this.t_||(this.s_.removeChild(this.t_.qc()),this.t_.rn(),this.t_=null);var n={if:this.bv.ct().if()};if(i.leftPriceScale.visible&&null===this.Qv){var e=function(){return i.leftPriceScale.borderVisible&&t.U().I().borderVisible};this.Qv=new vn("left",this.bv.I(),n,e),this.h_.appendChild(this.Qv.qc())}i.rightPriceScale.visible&&null===this.t_&&(e=function(){return i.rightPriceScale.borderVisible&&t.U().I().borderVisible},this.t_=new vn("right",this.bv.I(),n,e),this.s_.appendChild(this.t_.qc()))},t}(),gn=function(){function t(t,i){var n;this.w_=[],this.M_=0,this.An=0,this.Ys=0,this.b_=0,this.m_=0,this.g_=null,this.p_=!1,this.fv=new it,this.kl=new it,this.xi=i,this.n_=document.createElement("div"),this.n_.classList.add("tv-lightweight-charts"),this.n_.style.overflow="hidden",this.n_.style.width="100%",this.n_.style.height="100%",(n=this.n_).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.y_=document.createElement("table"),this.y_.setAttribute("cellspacing","0"),this.n_.appendChild(this.y_),this.k_=this.x_.bind(this),this.n_.addEventListener("wheel",this.k_,{passive:!1}),this.hi=new Zi(this.xl.bind(this),this.xi),this.ct().Wl().Zi(this.N_.bind(this),this),this.S_=new dn(this),this.y_.appendChild(this.S_.qc());var e=this.xi.width,r=this.xi.height;if(0===e||0===r){var s=t.getBoundingClientRect();0===e&&(e=Math.floor(s.width),e-=e%2),0===r&&(r=Math.floor(s.height),r-=r%2)}this.C_(e,r),this.D_(),t.appendChild(this.n_),this.T_(),this.hi.U().Xr().Zi(this.hi.Tl.bind(this.hi),this),this.hi.Ro().Zi(this.hi.Tl.bind(this.hi),this)}return t.prototype.ct=function(){return this.hi},t.prototype.I=function(){return this.xi},t.prototype.B_=function(){return this.w_},t.prototype.rn=function(){this.n_.removeEventListener("wheel",this.k_),0!==this.M_&&window.cancelAnimationFrame(this.M_),this.hi.Wl().nn(this),this.hi.U().Xr().nn(this),this.hi.Ro().nn(this),this.hi.rn();for(var t=0,i=this.w_;t<i.length;t++){var n=i[t];this.y_.removeChild(n.qc()),n.zv().nn(this),n.rn()}this.w_=[],d(this.S_).rn(),null!==this.n_.parentElement&&this.n_.parentElement.removeChild(this.n_),this.kl.rn(),this.fv.rn()},t.prototype.C_=function(t,i,n){if(void 0===n&&(n=!1),this.An!==i||this.Ys!==t){this.An=i,this.Ys=t;var e=i+"px",r=t+"px";d(this.n_).style.height=e,d(this.n_).style.width=r,this.y_.style.height=e,this.y_.style.width=r,n?this.E_(new Yt(3)):this.hi.Tl()}},t.prototype.Qc=function(t){void 0===t&&(t=new Yt(3));for(var i=0;i<this.w_.length;i++)this.w_[i].Qc(t.me(i).Me);this.S_.Qc(t.be())},t.prototype.hh=function(t){this.hi.hh(t),this.T_();var i=t.width||this.Ys,n=t.height||this.An;this.C_(i,n)},t.prototype.zv=function(){return this.fv},t.prototype.Wl=function(){return this.kl},t.prototype.L_=function(){var t=this;null!==this.g_&&(this.E_(this.g_),this.g_=null);var i=this.w_[0],n=Ki(document,new $i(this.Ys,this.An)),e=Gi(n),r=Xi(n);return J(e,r,(function(){var n=0,r=0,s=function(i){for(var s=0;s<t.w_.length;s++){var o=t.w_[s],h=o.Iv().st,u=d("left"===i?o.Yv():o.Kv()),a=u.rv();e.drawImage(a,n,r,u.Jc(),h),r+=h}};t.A_()&&(s("left"),n=d(i.Yv()).Jc()),r=0;for(var o=0;o<t.w_.length;o++){var h=t.w_[o],u=h.Iv(),a=h.rv();e.drawImage(a,n,r,u.ht,u.st),r+=u.st}n+=i.Iv().ht,t.V_()&&(r=0,s("right"));var l=function(i){var s=d("left"===i?t.S_.u_():t.S_.a_()),o=s.Iv(),h=s.rv();e.drawImage(h,n,r,o.ht,o.st)};if(t.xi.timeScale.visible){n=0,t.A_()&&(l("left"),n=d(i.Yv()).Jc());var c=t.S_.Iv();a=t.S_.rv(),e.drawImage(a,n,r,c.ht,c.st),t.V_()&&(n+=i.Iv().ht,l("right"),e.restore())}})),n},t.prototype.O_=function(t){return"none"===t||"left"===t&&!this.A_()||"right"===t&&!this.V_()||0===this.w_.length?0:d("left"===t?this.w_[0].Yv():this.w_[0].Kv()).Jc()},t.prototype.z_=function(){for(var t=0,i=0,n=0,e=0,r=this.w_;e<r.length;e++){var s=r[e];this.A_()&&(i=Math.max(i,d(s.Yv()).$c())),this.V_()&&(n=Math.max(n,d(s.Kv()).$c())),t+=s.jo()}var o=this.Ys,h=this.An,u=Math.max(o-i-n,0),a=this.xi.timeScale.visible?this.S_.l_():0;a%2&&(a+=1);for(var l=0+a,c=h<l?0:h-l,f=c/t,p=0,v=0;v<this.w_.length;++v){(s=this.w_[v]).Nv(this.hi.Pl()[v]);var y,g;g=v===this.w_.length-1?c-p:Math.round(s.jo()*f),p+=y=Math.max(g,2),s.Zc(new $i(u,y)),this.A_()&&s.Fv(i,"left"),this.V_()&&s.Fv(n,"right"),s.Gc()&&this.hi.Rl(s.Gc(),y)}this.S_.o_(new $i(u,a),i,n),this.hi.Cr(u),this.b_!==i&&(this.b_=i),this.m_!==n&&(this.m_=n)},t.prototype.x_=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.xi.handleScroll.mouseWheel||0!==n&&this.xi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.xi.handleScale.mouseWheel){var e=Math.sign(n)*Math.min(1,Math.abs(n)),r=t.clientX-this.n_.getBoundingClientRect().left;this.ct().ql(r,e)}0!==i&&this.xi.handleScroll.mouseWheel&&this.ct().Hl(-80*i)}},t.prototype.E_=function(t){var i=t.be();if(3===i&&this.P_(),3===i||2===i){for(var n=this.hi.Pl(),e=0;e<n.length;e++)t.me(e).fh&&n[e].rl();for(var r=t.xe(),s=0,o=r;s<o.length;s++){var h=o[s];this.Ne(h)}r.length>0&&(this.hi.Or(),this.hi.ro(),this.hi.zr()),this.S_.V()}this.Qc(t)},t.prototype.Ne=function(t){var i=this.hi.U();switch(t.pe){case 0:i.Jr();break;case 1:i.Gr(t.J);break;case 2:i._r(t.J);break;case 3:i.dr(t.J);break;case 4:i.Wr()}},t.prototype.xl=function(t){var i=this;null!==this.g_?this.g_.vn(t):this.g_=t,this.p_||(this.p_=!0,this.M_=window.requestAnimationFrame((function(){i.p_=!1,i.M_=0,null!==i.g_&&(i.E_(i.g_),i.g_=null)})))},t.prototype.P_=function(){this.D_()},t.prototype.D_=function(){for(var t=this.hi.Pl(),i=t.length,n=this.w_.length,e=i;e<n;e++){var r=y(this.w_.pop());this.y_.removeChild(r.qc()),r.zv().nn(this),r.rn()}for(e=n;e<i;e++)(r=new pn(this,t[e])).zv().Zi(this.F_.bind(this),this),this.w_.push(r),this.y_.insertBefore(r.qc(),this.S_.qc());for(e=0;e<i;e++){var s=t[e];(r=this.w_[e]).Gc()!==s?r.Nv(s):r.xv()}this.T_(),this.z_()},t.prototype.I_=function(t,i){var n,e=new Map;if(null!==t&&this.hi.O().forEach((function(i){var n=i.ta(t);null!==n&&e.set(i,n)})),null!==t){var r=this.hi.U().si(t);null!==r&&(n=r)}var s=this.ct().Ll(),o=null!==s&&s.Vl instanceof Ri?s.Vl:void 0,h=null!==s&&void 0!==s.Bv?s.Bv.Uu:void 0;return{P:n,W_:i||void 0,R_:o,j_:e,U_:h}},t.prototype.F_=function(t,i){var n=this;this.fv.hn((function(){return n.I_(t,i)}))},t.prototype.N_=function(t,i){var n=this;this.kl.hn((function(){return n.I_(t,i)}))},t.prototype.T_=function(){var t=this.xi.timeScale.visible?"":"none";this.S_.qc().style.display=t},t.prototype.A_=function(){return this.xi.leftPriceScale.visible},t.prototype.V_=function(){return this.xi.rightPriceScale.visible},t}();function mn(t,i,n){var e=n.value,r={Ps:i,P:t,J:[e,e,e,e]};return"color"in n&&void 0!==n.color&&(r.et=n.color),r}function bn(t,i,n){return{Ps:i,P:t,J:[n.open,n.high,n.low,n.close]}}function wn(t){return void 0!==t.J}function Mn(t){return function(i,n,e){return void 0===(r=e).open&&void 0===r.value?{P:i,Ps:n}:t(i,n,e);var r}}var _n={Candlestick:Mn(bn),Bar:Mn(bn),Area:Mn(mn),Histogram:Mn(mn),Line:Mn(mn)};function xn(t){return _n[t]}function Sn(t){return 60*t*60*1e3}function Pn(t){return 60*t*1e3}var Cn=[{q_:1,Fs:20},{q_:(1,1e3),Fs:19},{q_:Pn(1),Fs:20},{q_:Pn(5),Fs:21},{q_:Pn(30),Fs:22},{q_:Sn(1),Fs:30},{q_:Sn(3),Fs:31},{q_:Sn(6),Fs:32},{q_:Sn(12),Fs:33}];function kn(t,i){if(null!==i){var n=new Date(1e3*i),e=new Date(1e3*t);if(e.getUTCFullYear()!==n.getUTCFullYear())return 70;if(e.getUTCMonth()!==n.getUTCMonth())return 60;if(e.getUTCDate()!==n.getUTCDate())return 50;for(var r=Cn.length-1;r>=0;--r)if(Math.floor(n.getTime()/Cn[r].q_)!==Math.floor(e.getTime()/Cn[r].q_))return Cn[r].Fs}return 20}function An(t){if(!Lt(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Cs:Math.round(i.getTime()/1e3),Ss:t}}function On(t){if(!Ft(t))throw new Error("time must be of type isUTCTimestamp");return{Cs:t}}function Tn(t){return 0===t.length?null:Lt(t[0].time)?An:On}function En(t){return Ft(t)?On(t):Lt(t)?An(t):An(Bn(t))}function Bn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function In(t){M(t.time)&&(t.time=Bn(t.time))}function Dn(t){return{Ps:0,H_:new Map,Fh:t}}var Vn=function(){function t(){this.Y_=new Map,this.K_=new Map,this.X_=new Map,this.Z_=[]}return t.prototype.rn=function(){this.Y_.clear(),this.K_.clear(),this.X_.clear(),this.Z_=[]},t.prototype.J_=function(t,i){var n=this;this.X_.has(t)&&this.Y_.forEach((function(i){return i.H_.delete(t)}));var e=[];if(0!==i.length){!function(t){t.forEach(In)}(i);var r=d(Tn(i)),s=xn(t.da());e=i.map((function(i){var e=r(i.time),o=n.Y_.get(e.Cs);void 0===o&&(o=Dn(e),n.Y_.set(e.Cs,o));var h=s(e,o.Ps,i);return o.H_.set(t,h),h}))}return this.G_(),this.Q_(t,e),this.td(t)},t.prototype.sf=function(t){return this.J_(t,[])},t.prototype.nd=function(t,i){In(i);var n=d(Tn([i]))(i.time),e=this.X_.get(t);if(void 0!==e&&n.Cs<e.Cs)throw new Error("Cannot update oldest data, last time="+e.Cs+", new time="+n.Cs);var r=this.Y_.get(n.Cs),s=void 0===r;void 0===r&&(r=Dn(n),this.Y_.set(n.Cs,r));var o=xn(t.da())(n,r.Ps,i);r.H_.set(t,o);var h=this.hd(t,o);if(!s){var u=new Map;return null!==h&&u.set(t,h),{sd:u,U:{Er:this.rd()}}}return this.td(t)},t.prototype.hd=function(t,i){var n=this.K_.get(t);void 0===n&&(n=[],this.K_.set(t,n));var e=0!==n.length?n[n.length-1]:null,r=null;return null===e||i.P.Cs>e.P.Cs?wn(i)&&(n.push(i),r={Tl:!1,ed:[i]}):wn(i)?(n[n.length-1]=i,r={Tl:!1,ed:[i]}):(n.splice(-1,1),r={Tl:!0,ed:n}),this.X_.set(t,i.P),r},t.prototype.Q_=function(t,i){0!==i.length?(this.K_.set(t,i.filter(wn)),this.X_.set(t,i[i.length-1].P)):(this.K_.delete(t),this.X_.delete(t))},t.prototype.G_=function(){var t=new Map;this.Y_.forEach((function(i,n){i.H_.size>0&&t.set(n,i)})),this.Y_=t},t.prototype.ud=function(t){for(var i=-1,n=0;n<this.Z_.length&&n<t.length;++n){var e=this.Z_[n],r=t[n];if(e.P.Cs!==r.P.Cs){i=n;break}r.zs=e.zs}if(-1===i&&this.Z_.length!==t.length&&(i=Math.min(this.Z_.length,t.length)),-1===i)return-1;var s=function(i){var n=y(o.Y_.get(t[i].P.Cs));n.Ps=i,n.H_.forEach((function(t){t.Ps=i}))},o=this;for(n=i;n<t.length;++n)s(n);return function(t,i){void 0===i&&(i=0);for(var n=0===i||0===t.length?null:t[i-1].P.Cs,e=0,r=i;r<t.length;++r){var s=t[r];s.zs=kn(s.P.Cs,n),e+=s.P.Cs-(n||s.P.Cs),n=s.P.Cs}if(0===i&&t.length>1){var o=Math.ceil(e/(t.length-1)),h=t[0].P.Cs-o;t[0].zs=kn(t[0].P.Cs,h)}}(t,i),this.Z_=t,i},t.prototype.rd=function(){if(0===this.K_.size)return null;var t=0;return this.K_.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Ps))})),t},t.prototype.td=function(t){var i=Array.from(this.Y_.values()).map((function(t){return{zs:0,P:t.Fh}}));i.sort((function(t,i){return t.P.Cs-i.P.Cs}));var n=this.ud(i),e={sd:new Map,U:{Er:this.rd()}};if(-1!==n)this.K_.forEach((function(t,i){e.sd.set(i,{ed:t,Tl:!0})})),this.K_.has(t)||e.sd.set(t,{ed:[],Tl:!0}),e.U.ad=this.Z_;else{var r=this.K_.get(t);e.sd.set(t,{ed:r||[],Tl:!0})}return e},t}(),Ln={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},Fn=function(){function t(t){this.la=t}return t.prototype.applyOptions=function(t){this.la.hh(t)},t.prototype.options=function(){return this.la.I()},t.prototype.od=function(){return this.la},t}();function zn(t){var i=t.overlay,n=function(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(t);r<e.length;r++)i.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(t,e[r])&&(n[e[r]]=t[e[r]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Nn=function(){function t(t,i,n){this.Fe=t,this.ld=i,this.fd=n}return t.prototype.priceFormatter=function(){return this.Fe.Yh()},t.prototype.priceToCoordinate=function(t){var i=this.Fe.Y();return null===i?null:this.Fe.Z().X(t,i.J)},t.prototype.coordinateToPrice=function(t){var i=this.Fe.Y();return null===i?null:this.Fe.Z().Di(t,i.J)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new Dt(new Tt(t.from,t.to)).Us(),n=this.Fe.qi();if(n.Qt())return null;var e=n.Ea(i.hs(),1),r=n.Ea(i.ss(),-1),s=d(n.Da()),o=d(n.Ui());if(null!==e&&null!==r&&e.Ps>r.Ps)return{barsBefore:t.from-s,barsAfter:o-t.to};var h={barsBefore:null===e||e.Ps===s?t.from-s:e.Ps-s,barsAfter:null===r||r.Ps===o?o-t.to:o-r.Ps};return null!==e&&null!==r&&(h.from=e.P.Ss||e.P.Cs,h.to=r.P.Ss||r.P.Cs),h},t.prototype.setData=function(t){this.Fe.da(),this.ld.vd(this.Fe,t)},t.prototype.update=function(t){this.Fe.da(),this.ld.uo(this.Fe,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return f(f({},t),{time:En(t.time)})}));this.Fe.lo(i)},t.prototype.applyOptions=function(t){var i=zn(t);this.Fe.hh(i)},t.prototype.options=function(){return x(this.Fe.I())},t.prototype.priceScale=function(){return this.fd.priceScale(this.Fe.Z().nh())},t.prototype.createPriceLine=function(t){var i=m(x(Ln),t),n=this.Fe.fo(i);return new Fn(n)},t.prototype.removePriceLine=function(t){this.Fe.co(t.od())},t.prototype.seriesType=function(){return this.Fe.da()},t}(),Rn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c(i,t),i.prototype.applyOptions=function(i){xt(i),t.prototype.applyOptions.call(this,i)},i}(Nn),Jn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Yn={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:zt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},jn={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:zt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:f({},Jn),leftPriceScale:f(f({},Jn),{visible:!1}),rightPriceScale:f(f({},Jn),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:Yn,localization:{locale:nn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Un={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Hn={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Wn={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},Qn={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},qn={color:"#26a69a",base:0},Zn={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},$n=function(){function t(t,i){this._d=t,this.dd=i}return t.prototype.applyOptions=function(t){this._d.ct().Ol(this.dd,t)},t.prototype.options=function(){return this.Jt().I()},t.prototype.width=function(){return Jt(this.dd)?this._d.O_("left"===this.dd?"left":"right"):0},t.prototype.Jt=function(){return d(this._d.ct().zl(this.dd)).Z},t}(),Xn=function(){function t(t){this.wd=new it,this.tr=new it,this.hi=t,this.Ao().Kr().Zi(this.Md.bind(this)),this.Ao().$r().Zi(this.bd.bind(this))}return t.prototype.rn=function(){this.Ao().Kr().nn(this),this.Ao().$r().nn(this),this.wd.rn()},t.prototype.scrollPosition=function(){return this.Ao().Fr()},t.prototype.scrollToPosition=function(t,i){i?this.Ao().Yr(t,1e3):this.hi.dr(t)},t.prototype.scrollToRealTime=function(){this.Ao().Hr()},t.prototype.getVisibleRange=function(){var t,i,n=this.Ao().gr();return null===n?null:{from:null!==(t=n.from.Ss)&&void 0!==t?t:n.from.Cs,to:null!==(i=n.to.Ss)&&void 0!==i?i:n.to.Cs}},t.prototype.setVisibleRange=function(t){var i={from:En(t.from),to:En(t.to)},n=this.Ao().Nr(i);this.hi.rf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Ao().mr();return null===t?null:{from:t.hs(),to:t.ss()}},t.prototype.setVisibleLogicalRange=function(t){v(t.from<=t.to,"The from index cannot be after the to index."),this.hi.rf(t)},t.prototype.resetTimeScale=function(){this.hi.ke()},t.prototype.fitContent=function(){this.hi.Jr()},t.prototype.logicalToCoordinate=function(t){var i=this.hi.U();return i.Qt()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){var i=this.hi.U();return i.Qt()?null:i.Ar(t)},t.prototype.timeToCoordinate=function(t){var i=En(t),n=this.hi.U(),e=n.wr(i,!1);return null===e?null:n.G(e)},t.prototype.coordinateToTime=function(t){var i,n=this.hi.U(),e=n.Ar(t),r=n.si(e);return null===r?null:null!==(i=r.Ss)&&void 0!==i?i:r.Cs},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.wd.Zi(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.wd.tn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.tr.Zi(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.tr.tn(t)},t.prototype.applyOptions=function(t){this.Ao().hh(t)},t.prototype.options=function(){return x(this.Ao().I())},t.prototype.Ao=function(){return this.hi.U()},t.prototype.Md=function(){this.wd.sn()&&this.wd.hn(this.getVisibleRange())},t.prototype.bd=function(){this.tr.sn()&&this.tr.hn(this.getVisibleLogicalRange())},t}();function Gn(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Kn(t){return function(t){if(_(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&_(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var e=t.handleScroll;_(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=m(t.leftPriceScale,t.priceScale),t.rightPriceScale=m(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var te=function(){function t(t,i){var n=this;this.md=new Vn,this.gd=new Map,this.pd=new Map,this.yd=new it,this.kd=new it;var e=void 0===i?x(jn):m(x(jn),Kn(i));this._d=new gn(t,e),this._d.zv().Zi((function(t){n.yd.sn()&&n.yd.hn(n.xd(t()))}),this),this._d.Wl().Zi((function(t){n.kd.sn()&&n.kd.hn(n.xd(t()))}),this);var r=this._d.ct();this.Nd=new Xn(r)}return t.prototype.remove=function(){this._d.zv().nn(this),this._d.Wl().nn(this),this.Nd.rn(),this._d.rn(),this.gd.clear(),this.pd.clear(),this.yd.rn(),this.kd.rn(),this.md.rn()},t.prototype.resize=function(t,i,n){this._d.C_(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Gn((t=zn(t)).priceFormat);var i=m(x(Zn),Qn,t),n=this._d.ct().nf("Area",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Gn((t=zn(t)).priceFormat);var i=m(x(Zn),Hn,t),n=this._d.ct().nf("Bar",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),xt(t=zn(t)),Gn(t.priceFormat);var i=m(x(Zn),Un,t),n=this._d.ct().nf("Candlestick",i),e=new Rn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Gn((t=zn(t)).priceFormat);var i=m(x(Zn),qn,t),n=this._d.ct().nf("Histogram",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Gn((t=zn(t)).priceFormat);var i=m(x(Zn),Wn,t),n=this._d.ct().nf("Line",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.removeSeries=function(t){var i=y(this.gd.get(t)),n=this.md.sf(i);this._d.ct().sf(i),this.Sd(n),this.gd.delete(t),this.pd.delete(i)},t.prototype.vd=function(t,i){this.Sd(this.md.J_(t,i))},t.prototype.uo=function(t,i){this.Sd(this.md.nd(t,i))},t.prototype.subscribeClick=function(t){this.yd.Zi(t)},t.prototype.unsubscribeClick=function(t){this.yd.tn(t)},t.prototype.subscribeCrosshairMove=function(t){this.kd.Zi(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.kd.tn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this._d.ct().ef()),new $n(this._d,t)},t.prototype.timeScale=function(){return this.Nd},t.prototype.applyOptions=function(t){this._d.hh(Kn(t))},t.prototype.options=function(){return this._d.I()},t.prototype.takeScreenshot=function(){return this._d.L_()},t.prototype.Sd=function(t){var i=this._d.ct();i.tf(t.U.Er,t.U.ad),t.sd.forEach((function(t,i){return i.uo(t.ed,t.Tl)})),i.Or()},t.prototype.Cd=function(t){return y(this.pd.get(t))},t.prototype.xd=function(t){var i=this,n=new Map;t.j_.forEach((function(t,e){n.set(i.Cd(e),t)}));var e=void 0===t.R_?void 0:this.Cd(t.R_);return{time:t.P&&(t.P.Ss||t.P.Cs),point:t.W_,hoveredSeries:e,hoveredMarkerId:t.U_,seriesPrices:n}},t}();function ie(t,i){var n;if(M(t)){var e=document.getElementById(t);v(null!==e,"Cannot find element in DOM with id="+t),n=e}else n=t;return new te(n,i)}},1610:function(t,i,n){"use strict";n.d(i,"a",(function(){return u}));var e=n(588),r=n(1600),s=n(600),o=n(601),h=n(172),u=Object(e.a)({chartName:"BarChart",GraphicalChild:r.a,axisComponents:[{axisType:"xAxis",AxisComp:s.a},{axisType:"yAxis",AxisComp:o.a}],formatAxisMap:h.b})},1636:function(t,i,n){"use strict";n.d(i,"a",(function(){return v}));var e=n(169),r=n(1082),s=n(21),o=n(1109),h=n(360),u=n(18),a=6e4,l=1440,c=43200,f=525600;function p(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.a)(2,arguments);var p=n.locale||h.a;if(!p.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var v=Object(r.a)(t,i);if(isNaN(v))throw new RangeError("Invalid time value");var y,d,g=Object(o.a)(n);g.addSuffix=Boolean(n.addSuffix),g.comparison=v,v>0?(y=Object(s.default)(i),d=Object(s.default)(t)):(y=Object(s.default)(t),d=Object(s.default)(i));var m,b=null==n.roundingMethod?"round":String(n.roundingMethod);if("floor"===b)m=Math.floor;else if("ceil"===b)m=Math.ceil;else{if("round"!==b)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");m=Math.round}var w,M=d.getTime()-y.getTime(),_=M/a,x=Object(e.a)(d)-Object(e.a)(y),S=(M-x)/a;if("second"===(w=null==n.unit?_<1?"second":_<60?"minute":_<l?"hour":S<c?"day":S<f?"month":"year":String(n.unit))){var P=m(M/1e3);return p.formatDistance("xSeconds",P,g)}if("minute"===w){var C=m(_);return p.formatDistance("xMinutes",C,g)}if("hour"===w){var k=m(_/60);return p.formatDistance("xHours",k,g)}if("day"===w){var A=m(S/l);return p.formatDistance("xDays",A,g)}if("month"===w){var O=m(S/c);return 12===O&&"month"!==n.unit?p.formatDistance("xYears",1,g):p.formatDistance("xMonths",O,g)}if("year"===w){var T=m(S/f);return p.formatDistance("xYears",T,g)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function v(t,i){return Object(u.a)(1,arguments),p(t,Date.now(),i)}}}]);
//# sourceMappingURL=20.126cc242.chunk.js.map